2025-08-25 18:08:00,310 | INFO     | image_processing_api | add_request_id:177 | Request 54916133 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:08:02,801 | INFO     | image_processing_api | process_images:872 | Request 54916133: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:08:02,801 | INFO     | image_processing_api | process_images:880 | Request 54916133: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:08:02,802 | DEBUG    | image_processing_api | process_images:886 | Request 54916133: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:08:02,803 | DEBUG    | image_processing_api | process_images:890 | Request 54916133: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:08:02,815 | INFO     | image_processing_api | process_images:895 | Request 54916133: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:08:02,815 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:08:02,815 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:08:02,828 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:08:02,828 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:08:02,828 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:08:02,829 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:08:02,829 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:08:02,829 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:08:02,829 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:08:02,829 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:08:02,829 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:08:02,832 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:08:02,832 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:08:02,832 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:08:02,832 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:08:02,832 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:08:02,832 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:08:02,832 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:08:02,832 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:08:02,832 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:08:02,832 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:08:02,832 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:08:02,832 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:08:02,833 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:08:02,833 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:08:02,833 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:08:02,833 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:08:02,833 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:08:02,834 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:08:02,834 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:08:02,834 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:08:02,834 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:08:02,834 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:08:03,057 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:08:03,070 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:08:06,798 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:08:06,799 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:08:06,799 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:08:06,799 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:08:06,799 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:08:06,799 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:08:06,799 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:08:06,799 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:08:06,799 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:08:07,025 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:08:07,035 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:08:07,036 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:08:07,036 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:08:08,700 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:08:08,701 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:08:08,701 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:08:08,701 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:08:08,701 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:08:08,701 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:08:08,701 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:08:08,701 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:08:08,701 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:08:08,701 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:08:08,701 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:08:08,975 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:08:08,985 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:08:08,985 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:08:11,337 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a colorful graphic design of Rick Sanchez on the back, w... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:08:11,337 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:08:11,338 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:08:11,338 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphz5wjr6o/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:08:11,605 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:08:11,616 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:08:13,726 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:645 | No additional details from image 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:645
2025-08-25 18:08:14,231 | INFO     | image_processing_api | _generate_comprehensive_description_internal:665 | No additional details found, using base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-25 18:08:14,232 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:08:14,232 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a colorful graphic design of Rick Sanchez on the back, w... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:08:14,232 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a colorful graphic design of Rick Sanchez on the back, w... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:08:14,233 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a colorful graphic design of Rick Sanchez on the back, w... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:08:14,233 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:08:14,233 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:08:14,233 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:08:14,233 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:08:14,233 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:08:14,234 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:08:14,234 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:08:14,234 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:08:14,234 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:08:14,237 | INFO     | image_processing_api | process_images:902 | Request 54916133: Processing completed in 11.420s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:08:14,238 | DEBUG    | image_processing_api | process_images:907 | Request 54916133: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:08:14,238 | INFO     | image_processing_api | process_images:909 | Request 54916133: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:08:14,244 | INFO     | image_processing_api | add_request_id:184 | Request 54916133 completed: 200 in 13.934s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:13:37,065 | INFO     | image_processing_api | add_request_id:177 | Request c352179f started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:13:40,078 | INFO     | image_processing_api | process_images:872 | Request c352179f: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:13:40,078 | INFO     | image_processing_api | process_images:880 | Request c352179f: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:13:40,080 | DEBUG    | image_processing_api | process_images:886 | Request c352179f: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:13:40,080 | DEBUG    | image_processing_api | process_images:890 | Request c352179f: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:13:40,097 | INFO     | image_processing_api | process_images:895 | Request c352179f: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:13:40,097 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:13:40,097 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:13:40,133 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:13:40,133 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:13:40,133 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:13:40,133 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:13:40,134 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:13:40,134 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:13:40,134 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:13:40,134 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:13:40,134 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:13:40,140 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:13:40,140 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:13:40,141 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:13:40,143 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:13:40,145 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:13:40,146 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:13:40,146 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:13:40,146 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:13:40,151 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:13:40,185 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:13:40,185 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:13:40,185 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:13:40,185 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:13:40,186 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:13:40,187 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:13:40,187 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:13:40,187 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:13:40,188 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:13:40,188 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:13:40,188 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:13:40,189 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:13:40,189 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:13:40,473 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:13:40,487 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:13:42,747 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:13:42,747 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:13:42,747 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:13:42,747 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:13:42,748 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:13:42,748 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:13:42,748 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:13:42,748 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:13:42,748 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:13:42,977 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:13:42,994 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:13:42,995 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:13:42,995 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:13:45,868 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:13:45,868 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:13:45,868 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:13:45,869 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:13:45,869 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:13:45,869 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:13:45,869 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:13:45,869 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:13:45,869 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:13:45,869 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:13:45,869 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:13:46,088 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:13:46,100 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:13:46,100 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:13:48,491 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character named Ric... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:13:48,492 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:13:48,492 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:13:48,492 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1466bv0k/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:13:48,719 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:13:48,729 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:13:52,514 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The graphic t-shirt now features a smaller design on the front that reads "GENIUS" in colorful text (red, blue, and white).
- The pants appear to have a more tailored fit with a slight taper towards the ankle.
- The visible footwear is white with a contrasting dark sole, likely a sneaker style. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:13:53,018 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:13:53,019 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:13:53,019 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character named Ric... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:13:53,019 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character named Ric... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:13:53,019 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character named Ric... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:13:53,019 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:13:53,019 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:13:53,020 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:13:53,020 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:13:53,020 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:13:53,020 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:13:53,020 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:13:53,020 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:13:53,020 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:13:53,021 | INFO     | image_processing_api | process_images:902 | Request c352179f: Processing completed in 12.924s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:13:53,022 | DEBUG    | image_processing_api | process_images:907 | Request c352179f: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:13:53,022 | INFO     | image_processing_api | process_images:909 | Request c352179f: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:13:53,033 | INFO     | image_processing_api | add_request_id:184 | Request c352179f completed: 200 in 15.969s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:15:06,576 | INFO     | image_processing_api | add_request_id:177 | Request 6d1baef3 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:15:09,595 | INFO     | image_processing_api | process_images:872 | Request 6d1baef3: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:15:09,595 | INFO     | image_processing_api | process_images:880 | Request 6d1baef3: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:15:09,596 | DEBUG    | image_processing_api | process_images:886 | Request 6d1baef3: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:15:09,596 | DEBUG    | image_processing_api | process_images:890 | Request 6d1baef3: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:15:09,607 | INFO     | image_processing_api | process_images:895 | Request 6d1baef3: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:15:09,608 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:15:09,608 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:15:09,618 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:15:09,618 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:15:09,618 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:15:09,618 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:15:09,618 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:15:09,618 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:15:09,618 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:15:09,618 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:15:09,618 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:15:09,621 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:15:09,621 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:15:09,621 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:15:09,621 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:15:09,621 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:15:09,621 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:15:09,621 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:15:09,621 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:15:09,621 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:15:09,621 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:15:09,621 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:15:09,622 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:15:09,622 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:15:09,622 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:15:09,622 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:15:09,622 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:15:09,622 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:15:09,622 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:15:09,622 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:15:09,622 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:15:09,622 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:15:09,622 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:15:09,842 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:15:09,854 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:15:11,220 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:15:11,221 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:15:11,221 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:15:11,221 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:15:11,221 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:15:11,222 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:15:11,222 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:15:11,222 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:15:11,222 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:15:11,496 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:15:11,510 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:15:11,510 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:15:11,510 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:15:14,095 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:15:14,096 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:15:14,096 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:15:14,096 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:15:14,096 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:15:14,096 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:15:14,096 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:15:14,096 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:15:14,096 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:15:14,097 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:15:14,097 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:15:14,331 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:15:14,343 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:15:14,343 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:15:16,901 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized graphic t-shirt featuring a vibrant illustration of a character named Rick... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:15:16,901 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:15:16,901 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:15:16,902 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpxk_0aqum/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:15:17,166 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:15:17,190 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:15:20,008 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The graphic t-shirt features a smaller, colorful logo or text on the front, contrasting with the larger illustration on the back.
- The shorts have been replaced with relaxed-fit black pants that have a more tailored appearance, featuring a slight taper towards the ankle.
- Footwear is now white sneakers that have a more structured silhouette, possibly with a rubber sole and breathable material. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:15:20,510 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:15:20,512 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:15:20,512 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized graphic t-shirt featuring a vibrant illustration of a character named Rick... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:15:20,512 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized graphic t-shirt featuring a vibrant illustration of a character named Rick... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:15:20,512 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized graphic t-shirt featuring a vibrant illustration of a character named Rick... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:15:20,512 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:15:20,512 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:15:20,512 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:15:20,512 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:15:20,512 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:15:20,513 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:15:20,513 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:15:20,513 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:15:20,513 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:15:20,513 | INFO     | image_processing_api | process_images:902 | Request 6d1baef3: Processing completed in 10.906s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:15:20,514 | DEBUG    | image_processing_api | process_images:907 | Request 6d1baef3: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:15:20,514 | INFO     | image_processing_api | process_images:909 | Request 6d1baef3: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:15:20,516 | INFO     | image_processing_api | add_request_id:184 | Request 6d1baef3 completed: 200 in 13.941s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:18:58,568 | INFO     | image_processing_api | add_request_id:177 | Request dab772b7 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:19:05,086 | INFO     | image_processing_api | process_images:872 | Request dab772b7: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:19:05,087 | INFO     | image_processing_api | process_images:880 | Request dab772b7: File size: 26804679 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:19:05,089 | DEBUG    | image_processing_api | process_images:886 | Request dab772b7: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:19:05,090 | DEBUG    | image_processing_api | process_images:890 | Request dab772b7: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:19:05,120 | INFO     | image_processing_api | process_images:895 | Request dab772b7: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:19:05,120 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:19:05,120 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:19:05,154 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 7 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292394031010_001.jpg', '6292394031010_002.jpg', '6292394031010_003.jpg', 'uploaded.zip', '6292394031010_006.jpg', '6292394031010_004.jpg', '6292394031010_005.jpg'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292394031010_002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292394031010_003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292394031010_006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292394031010_004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292394031010_005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:19:05,155 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:19:05,159 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:19:05,159 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:19:05,159 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292394031010_001.jpg', '6292394031010_002.jpg', '6292394031010_003.jpg', 'uploaded.zip', '6292394031010_006.jpg', '6292394031010_004.jpg', '6292394031010_005.jpg'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:19:05,159 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:05,159 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292394031010_002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:05,159 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292394031010_003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:05,160 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:05,160 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292394031010_006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:05,160 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292394031010_004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:05,160 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292394031010_005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:05,160 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:19:05,160 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:19:05,160 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:19:05,160 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:19:05,160 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292394031010_001.jpg', '6292394031010_002.jpg', '6292394031010_003.jpg', 'uploaded.zip', '6292394031010_006.jpg', '6292394031010_004.jpg', '6292394031010_005.jpg'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:19:05,160 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:19:05,160 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 6 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:19:05,161 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292394031010: 6 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:19:05,161 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:19:05,161 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:19:05,161 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292394031010 with 6 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:19:05,161 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:19:05,161 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:19:05,161 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:19:05,161 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:19:05,161 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:05,353 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292394031010_001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:05,363 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292394031010_001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:07,023 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Women' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:19:07,023 | INFO     | image_processing_api | _detect_gender_internal:432 | Gender detected: Women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:432
2025-08-25 18:19:07,023 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:19:07,023 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292394031010: Women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:19:07,023 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:19:07,023 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:19:07,024 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:19:07,024 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:19:07,024 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:07,240 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292394031010_001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:07,251 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292394031010_001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:07,251 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:19:07,251 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:19:09,989 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:19:09,990 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:19:09,990 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:19:09,990 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:19:09,990 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292394031010: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:19:09,990 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:19:09,990 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 6 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:19:09,990 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:19:09,990 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:19:09,990 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:19:09,990 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:10,209 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292394031010_001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:10,220 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292394031010_001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:10,220 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:19:12,961 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized pullover sweatshirt with a white collar, featuring a small logo detail on ... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:19:12,963 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 5 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:19:12,963 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292394031010_002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:19:12,963 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/6292394031010_002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:13,181 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292394031010_002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:13,191 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292394031010_002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:17,465 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The black oversized pullover sweatshirt features a front placket with buttons, enhancing its casual style.
- The inner layer is a white collared shirt that peeks out from beneath the sweatshirt, adding dimension to the outfit.
- The olive green trousers have a more defined pleat running down the front, enhancing the structured look.
- Footwear consists of black chunky sneakers, which provide a sporty and comfortable touch to the outfit. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:19:17,968 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 2: 6292394031010_003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:19:17,969 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/6292394031010_003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:18,208 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292394031010_003.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:18,220 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292394031010_003.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:20,745 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 2: - The sweatshirt has a distinctive logo on the back, featuring the word "STARTER" in bold lettering, along with a star and laurel design, indicating it is branded.
- The fabric of the sweatshirt appears to have a smooth, slightly shiny finish, suggesting it may be a blend of cotton and a synthetic material for added durability.
- The fit of the sweatshirt is oversized, with dropped shoulders for a relaxed silhouette.
- The sleeves appear to have a more fitted cuff at the wrists, contrasting | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:19:21,250 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 3: 6292394031010_004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:19:21,251 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/6292394031010_004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:21,470 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292394031010_004.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:21,481 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292394031010_004.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:24,261 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:645 | No additional details from image 3 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:645
2025-08-25 18:19:24,767 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 4: 6292394031010_005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:19:24,768 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/6292394031010_005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:25,005 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292394031010_005.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:25,020 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292394031010_005.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:27,707 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 4: - The sweatshirt features a contrasting white collar that is structured and has a buttoned placket.
- The small logo on the chest is white with a star design, adding a graphic element to the outfit.
- The fabric of the sweatshirt appears to have a smooth, slightly shiny finish, which may differ from typical sweatshirt textures. 

No details about footwear or other items are visible in this image. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:19:28,209 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 5: 6292394031010_006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:19:28,209 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpf_q_qqr2/6292394031010_006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:28,451 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292394031010_006.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:28,461 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292394031010_006.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:30,641 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:645 | No additional details from image 5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:645
2025-08-25 18:19:31,142 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 3 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:19:31,143 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:19:31,144 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized pullover sweatshirt with a white collar, featuring a small logo detail on ... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:19:31,144 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized pullover sweatshirt with a white collar, featuring a small logo detail on ... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:19:31,144 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292394031010: Wearing a black oversized pullover sweatshirt with a white collar, featuring a small logo detail on ... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:19:31,144 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Women, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:19:31,144 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:363 | Modified backgrounds for women: ['Urban street_women'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:363
2025-08-25 18:19:31,144 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:19:31,144 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street_women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:19:31,144 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street_women → Urban street_women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:19:31,144 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292394031010: Urban street_women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:19:31,144 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:19:31,144 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:19:31,144 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:19:31,145 | INFO     | image_processing_api | process_images:902 | Request dab772b7: Processing completed in 26.025s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:19:31,145 | DEBUG    | image_processing_api | process_images:907 | Request dab772b7: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:19:31,145 | INFO     | image_processing_api | process_images:909 | Request dab772b7: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:19:31,150 | INFO     | image_processing_api | add_request_id:184 | Request dab772b7 completed: 200 in 32.582s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:19:50,105 | INFO     | image_processing_api | add_request_id:177 | Request d0a65e45 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:19:54,058 | INFO     | image_processing_api | process_images:872 | Request d0a65e45: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:19:54,058 | INFO     | image_processing_api | process_images:880 | Request d0a65e45: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:19:54,059 | DEBUG    | image_processing_api | process_images:886 | Request d0a65e45: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:19:54,060 | DEBUG    | image_processing_api | process_images:890 | Request d0a65e45: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:19:54,063 | INFO     | image_processing_api | process_images:895 | Request d0a65e45: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:19:54,063 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:19:54,063 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:19:54,070 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:19:54,070 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:19:54,070 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:19:54,070 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:19:54,070 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:54,070 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:54,070 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:19:54,070 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:19:54,070 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:19:54,072 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:19:54,072 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:19:54,072 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:19:54,072 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:54,072 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:54,072 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:19:54,072 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:19:54,072 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:19:54,072 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:19:54,072 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:19:54,073 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:19:54,073 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:19:54,073 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:19:54,073 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:19:54,073 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:19:54,073 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:19:54,073 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:19:54,073 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:19:54,073 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:19:54,073 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:19:54,073 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:19:54,073 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:54,286 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:54,296 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:56,072 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:19:56,072 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:19:56,072 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:19:56,072 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:19:56,072 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:19:56,073 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:19:56,073 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:19:56,073 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:19:56,073 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:56,300 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:56,311 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:56,311 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:19:56,311 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:19:58,734 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:19:58,734 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:19:58,734 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:19:58,734 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:19:58,735 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:19:58,735 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:19:58,735 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:19:58,735 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:19:58,735 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:19:58,735 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:19:58,735 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:19:58,965 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:19:58,975 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:19:58,975 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:20:01,370 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:20:01,371 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:20:01,371 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:20:01,371 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp_ucjqmt8/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:20:01,578 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:20:01,589 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:20:04,880 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The graphic t-shirt features a small colored logo on the front, contrasting with the black base.
- The shorts have been replaced with black relaxed-fit pants that appear to have a slightly tapered leg.
- The footwear is now white with a black sole, indicating a sportier sneaker style. 
- The t-shirt appears to have a softer, possibly cotton fabric, contributing to a more casual look. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:20:05,385 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:20:05,386 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:20:05,386 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:20:05,386 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:20:05,386 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:20:05,386 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:20:05,386 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:20:05,386 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:20:05,387 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:20:05,387 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:20:05,387 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:20:05,387 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:20:05,387 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:20:05,388 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:20:05,388 | INFO     | image_processing_api | process_images:902 | Request d0a65e45: Processing completed in 11.325s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:20:05,390 | DEBUG    | image_processing_api | process_images:907 | Request d0a65e45: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:20:05,390 | INFO     | image_processing_api | process_images:909 | Request d0a65e45: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:20:05,393 | INFO     | image_processing_api | add_request_id:184 | Request d0a65e45 completed: 200 in 15.288s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:23:21,743 | INFO     | image_processing_api | add_request_id:177 | Request fab62906 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:23:24,516 | INFO     | image_processing_api | process_images:872 | Request fab62906: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:23:24,517 | INFO     | image_processing_api | process_images:880 | Request fab62906: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:23:24,520 | DEBUG    | image_processing_api | process_images:886 | Request fab62906: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__ | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:23:24,520 | DEBUG    | image_processing_api | process_images:890 | Request fab62906: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:23:24,530 | INFO     | image_processing_api | process_images:895 | Request fab62906: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:23:24,530 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:23:24,530 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__ | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:23:24,545 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__ | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:23:24,545 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:23:24,546 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:23:24,546 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:23:24,546 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:23:24,546 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:23:24,546 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:23:24,546 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:23:24,546 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:23:24,549 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:23:24,549 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:23:24,549 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:23:24,549 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:23:24,549 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:23:24,549 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:23:24,549 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__ | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:23:24,549 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:23:24,550 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:23:24,550 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__ | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:23:24,550 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:23:24,550 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:23:24,550 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:23:24,550 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:23:24,551 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:23:24,551 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:23:24,551 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:23:24,551 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:23:24,551 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:23:24,551 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:23:24,551 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:23:24,551 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:23:24,763 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:23:24,775 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:23:26,103 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:23:26,103 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:23:26,103 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:23:26,103 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:23:26,103 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:23:26,104 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:23:26,104 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:23:26,104 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:23:26,104 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:23:26,326 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:23:26,337 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:23:26,337 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:23:26,337 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:23:28,244 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:23:28,245 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:23:28,245 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:23:28,245 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:23:28,245 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:23:28,245 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:23:28,245 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:23:28,245 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:23:28,246 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:23:28,246 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:23:28,246 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:23:28,483 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:23:28,493 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:23:28,493 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:23:30,401 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a colorful graphic design on the back with the character... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:23:30,401 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:23:30,402 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:23:30,402 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp8qrdt8__/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:23:30,646 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:23:30,658 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:23:33,335 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt features a smaller, colorful graphic on the front, reading "GENIUS" in red, blue, and white text.
- The fit of the t-shirt appears less oversized compared to the initial description, with a more tailored look.
- The shorts are replaced with black, relaxed fit pants that have a slightly tapered leg.
- The footwear is now clearly visible; it consists of white sneakers with a subtle design and black soles. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:23:33,841 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:23:33,844 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:23:33,844 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a colorful graphic design on the back with the character... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:23:33,844 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a colorful graphic design on the back with the character... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:23:33,844 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a colorful graphic design on the back with the character... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:23:33,844 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:23:33,844 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:23:33,845 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:23:33,845 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:23:33,845 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:23:33,845 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:23:33,845 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:23:33,845 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:23:33,845 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:23:33,846 | INFO     | image_processing_api | process_images:902 | Request fab62906: Processing completed in 9.316s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:23:33,846 | DEBUG    | image_processing_api | process_images:907 | Request fab62906: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:23:33,846 | INFO     | image_processing_api | process_images:909 | Request fab62906: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:23:33,862 | INFO     | image_processing_api | add_request_id:184 | Request fab62906 completed: 200 in 12.119s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:28:11,633 | INFO     | image_processing_api | add_request_id:177 | Request 59347d2f started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:28:14,738 | INFO     | image_processing_api | process_images:872 | Request 59347d2f: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:28:14,738 | INFO     | image_processing_api | process_images:880 | Request 59347d2f: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:28:14,741 | DEBUG    | image_processing_api | process_images:886 | Request 59347d2f: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:28:14,741 | DEBUG    | image_processing_api | process_images:890 | Request 59347d2f: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:28:14,745 | INFO     | image_processing_api | process_images:895 | Request 59347d2f: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:28:14,745 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:28:14,745 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:28:14,754 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:28:14,755 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:28:14,755 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:28:14,755 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:28:14,755 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:28:14,755 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:28:14,755 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:28:14,755 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:28:14,755 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:28:14,757 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:28:14,757 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:28:14,757 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:28:14,757 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:28:14,757 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:28:14,757 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:28:14,757 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:28:14,757 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:28:14,758 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:28:14,758 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:28:14,758 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:28:14,758 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:28:14,758 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:28:14,758 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:28:14,758 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:28:14,758 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:28:14,758 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:28:14,758 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:28:14,758 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:28:14,758 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:28:14,758 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:28:14,758 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:28:14,995 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:28:15,009 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:28:16,002 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:28:16,002 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:28:16,002 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:28:16,002 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:28:16,002 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:28:16,002 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:28:16,003 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:28:16,003 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:28:16,003 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:28:16,226 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:28:16,237 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:28:16,237 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:28:16,237 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:28:17,685 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:28:17,686 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:28:17,686 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:28:17,686 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:28:17,686 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:28:17,686 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:28:17,686 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:28:17,686 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:28:17,686 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:28:17,686 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:28:17,686 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:28:17,899 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:28:17,910 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:28:17,910 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:28:20,325 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized short-sleeve t-shirt featuring a colorful graphic print of Rick Sanchez on... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:28:20,325 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:28:20,325 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:28:20,325 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp1dtewjzw/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:28:20,550 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:28:20,560 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:28:23,649 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt features a small graphic text reading "GENIUS" in red and blue across the front.
- The fit of the t-shirt appears to be relaxed or oversized, with slightly dropped shoulders.
- The trousers are black and maintain a more tailored appearance with a structured fit.
- The footwear is a pair of white minimalist sneakers with a subtle texture, possibly leather or a synthetic material, accented with a black sole. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:28:24,153 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:28:24,154 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:28:24,154 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized short-sleeve t-shirt featuring a colorful graphic print of Rick Sanchez on... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:28:24,154 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized short-sleeve t-shirt featuring a colorful graphic print of Rick Sanchez on... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:28:24,154 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized short-sleeve t-shirt featuring a colorful graphic print of Rick Sanchez on... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:28:24,154 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:28:24,154 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:28:24,154 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:28:24,154 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:28:24,154 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:28:24,154 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:28:24,155 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:28:24,155 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:28:24,155 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:28:24,155 | INFO     | image_processing_api | process_images:902 | Request 59347d2f: Processing completed in 9.410s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:28:24,157 | DEBUG    | image_processing_api | process_images:907 | Request 59347d2f: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:28:24,157 | INFO     | image_processing_api | process_images:909 | Request 59347d2f: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:28:24,165 | INFO     | image_processing_api | add_request_id:184 | Request 59347d2f completed: 200 in 12.533s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:36:51,247 | INFO     | image_processing_api | add_request_id:177 | Request 63d38ffb started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:36:53,993 | INFO     | image_processing_api | process_images:872 | Request 63d38ffb: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:36:53,993 | INFO     | image_processing_api | process_images:880 | Request 63d38ffb: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:36:53,994 | DEBUG    | image_processing_api | process_images:886 | Request 63d38ffb: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:36:53,995 | DEBUG    | image_processing_api | process_images:890 | Request 63d38ffb: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:36:54,002 | INFO     | image_processing_api | process_images:895 | Request 63d38ffb: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:36:54,002 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:36:54,002 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:36:54,016 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:36:54,016 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:36:54,016 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:36:54,016 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:36:54,016 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:36:54,016 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:36:54,016 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:36:54,016 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:36:54,016 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:36:54,018 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:36:54,018 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:36:54,018 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:36:54,018 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:36:54,019 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:36:54,019 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:36:54,019 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:36:54,019 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:36:54,019 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:36:54,019 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:36:54,019 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:36:54,019 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:36:54,019 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:36:54,019 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:36:54,019 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:36:54,019 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:36:54,019 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:36:54,019 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:36:54,019 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:36:54,019 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:36:54,019 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:36:54,019 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:36:54,253 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:36:54,266 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:36:56,610 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:36:56,610 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:36:56,610 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:36:56,610 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:36:56,610 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:36:56,610 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:36:56,610 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:36:56,610 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:36:56,610 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:36:56,827 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:36:56,838 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:36:56,838 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:36:56,838 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:36:58,741 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:36:58,742 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:36:58,742 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:36:58,742 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:36:58,742 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:36:58,743 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:36:58,743 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:36:58,743 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:36:58,743 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:36:58,743 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:36:58,743 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:36:58,970 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:36:58,982 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:36:58,982 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:37:01,608 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a graphic print of Rick Sanchez from the animated series... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:37:01,609 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:37:01,609 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:37:01,609 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpoxhkgg7d/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:37:01,832 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:37:01,841 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:37:04,887 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt features a different graphic design that reads "GENIUS" in contrasting colors, including red and blue, rather than the "Rick and Morty" design mentioned previously.
- The fit of the t-shirt is more relaxed and slightly longer, falling below the waist.
- The shorts are replaced with black, relaxed-fit pants that have a more tailored appearance, offering a straight-leg silhouette instead of a casual short style.
- The sneakers are now described as light-colored with a more structured | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:37:05,393 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:37:05,395 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:37:05,395 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a graphic print of Rick Sanchez from the animated series... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:37:05,395 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a graphic print of Rick Sanchez from the animated series... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:37:05,395 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a graphic print of Rick Sanchez from the animated series... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:37:05,395 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:37:05,395 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:37:05,395 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:37:05,395 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:37:05,396 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:37:05,396 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:37:05,396 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:37:05,396 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:37:05,396 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:37:05,396 | INFO     | image_processing_api | process_images:902 | Request 63d38ffb: Processing completed in 11.394s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:37:05,397 | DEBUG    | image_processing_api | process_images:907 | Request 63d38ffb: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:37:05,397 | INFO     | image_processing_api | process_images:909 | Request 63d38ffb: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:37:05,404 | INFO     | image_processing_api | add_request_id:184 | Request 63d38ffb completed: 200 in 14.158s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:39:19,997 | INFO     | image_processing_api | add_request_id:177 | Request 4275c2b6 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:39:23,018 | INFO     | image_processing_api | process_images:872 | Request 4275c2b6: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:39:23,018 | INFO     | image_processing_api | process_images:880 | Request 4275c2b6: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:39:23,021 | DEBUG    | image_processing_api | process_images:886 | Request 4275c2b6: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:39:23,021 | DEBUG    | image_processing_api | process_images:890 | Request 4275c2b6: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:39:23,032 | INFO     | image_processing_api | process_images:895 | Request 4275c2b6: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:39:23,032 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:39:23,032 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:39:23,047 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:39:23,048 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:39:23,048 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:39:23,048 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:39:23,048 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:39:23,048 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:39:23,048 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:39:23,048 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:39:23,048 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:39:23,053 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:39:23,054 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:39:23,054 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:39:23,054 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:39:23,054 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:39:23,054 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:39:23,054 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:39:23,054 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:39:23,054 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:39:23,054 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:39:23,055 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:39:23,055 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:39:23,055 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:39:23,055 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:39:23,055 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:39:23,055 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:39:23,055 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:39:23,055 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:39:23,055 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:39:23,055 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:39:23,056 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:39:23,056 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:39:23,275 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:39:23,285 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:39:25,172 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:39:25,172 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:39:25,172 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:39:25,172 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:39:25,172 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:39:25,172 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:39:25,172 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:39:25,172 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:39:25,172 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:39:25,391 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:39:25,402 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:39:25,403 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:39:25,403 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:39:27,939 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:39:27,940 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:39:27,940 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:39:27,941 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:39:27,941 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:39:27,941 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:39:27,941 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:39:27,941 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:39:27,942 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:39:27,942 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:39:27,942 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:39:28,170 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:39:28,181 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:39:28,181 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:39:31,310 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a colorful graphic print of the character Rick Sanchez f... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:39:31,310 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:39:31,311 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:39:31,311 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmppvxv8ftc/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:39:31,532 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:39:31,544 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:39:34,611 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt features a smaller graphic on the front that reads "Genius" in red and blue tones, contrasting with the black fabric.
- The fit of the t-shirt appears relaxed and slightly longer, providing an oversized look.
- The trousers have a more tailored appearance, showing a slightly tapered leg with a cleaner silhouette.
- The footwear is described as minimalist sneakers in white, with a subtle design and possibly a rubber sole indicated by the contrasting color on the bottom. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:39:35,116 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:39:35,117 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:39:35,118 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a colorful graphic print of the character Rick Sanchez f... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:39:35,118 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a colorful graphic print of the character Rick Sanchez f... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:39:35,118 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a colorful graphic print of the character Rick Sanchez f... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:39:35,119 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:39:35,119 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:39:35,119 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:39:35,119 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:39:35,119 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:39:35,119 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:39:35,120 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:39:35,120 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:39:35,120 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:39:35,120 | INFO     | image_processing_api | process_images:902 | Request 4275c2b6: Processing completed in 12.088s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:39:35,121 | DEBUG    | image_processing_api | process_images:907 | Request 4275c2b6: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:39:35,121 | INFO     | image_processing_api | process_images:909 | Request 4275c2b6: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:39:35,127 | INFO     | image_processing_api | add_request_id:184 | Request 4275c2b6 completed: 200 in 15.131s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:42:40,646 | INFO     | image_processing_api | add_request_id:177 | Request b27b745e started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:42:43,306 | INFO     | image_processing_api | process_images:872 | Request b27b745e: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:42:43,308 | INFO     | image_processing_api | process_images:880 | Request b27b745e: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:42:43,315 | DEBUG    | image_processing_api | process_images:886 | Request b27b745e: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:42:43,315 | DEBUG    | image_processing_api | process_images:890 | Request b27b745e: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:42:43,330 | INFO     | image_processing_api | process_images:895 | Request b27b745e: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:42:43,332 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:42:43,333 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:42:43,352 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:42:43,353 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:42:43,353 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:42:43,353 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:42:43,353 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:42:43,353 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:42:43,353 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:42:43,353 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:42:43,353 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:42:43,356 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:42:43,356 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:42:43,356 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:42:43,356 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:42:43,356 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:42:43,356 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:42:43,356 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:42:43,356 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:42:43,356 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:42:43,356 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:42:43,356 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:42:43,357 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:42:43,357 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:42:43,357 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:42:43,357 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:42:43,357 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:42:43,357 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:42:43,357 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:42:43,357 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:42:43,357 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:42:43,358 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:42:43,358 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:42:43,570 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:42:43,582 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:42:46,403 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:42:46,404 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:42:46,404 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:42:46,404 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:42:46,404 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:42:46,404 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:42:46,404 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:42:46,404 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:42:46,404 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:42:46,633 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:42:46,643 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:42:46,644 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:42:46,644 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:42:48,643 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:42:48,644 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:42:48,644 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:42:48,644 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:42:48,644 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:42:48,644 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:42:48,644 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:42:48,644 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:42:48,644 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:42:48,645 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:42:48,645 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:42:48,872 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:42:48,882 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:42:48,882 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:42:51,405 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character holding a... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:42:51,406 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:42:51,406 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:42:51,406 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo4rzu0w0/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:42:51,635 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:42:51,645 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:42:58,094 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The graphic t-shirt features a smaller, multi-colored logo design on the front, displayed in bright colors (red, blue, and white) rather than a character illustration.
- The shorts have been replaced with black relaxed-fit pants that taper slightly toward the ankle.
- The footwear is now visible and consists of white sneakers with black accents and a thicker sole. 
- The overall fit of the t-shirt appears looser, hanging slightly below the waistline of the pants. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:42:58,600 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:42:58,600 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:42:58,601 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character holding a... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:42:58,601 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character holding a... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:42:58,601 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character holding a... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:42:58,601 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:42:58,602 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:42:58,602 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:42:58,602 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:42:58,602 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:42:58,602 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:42:58,603 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:42:58,603 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:42:58,603 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:42:58,603 | INFO     | image_processing_api | process_images:902 | Request b27b745e: Processing completed in 15.271s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:42:58,604 | DEBUG    | image_processing_api | process_images:907 | Request b27b745e: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:42:58,604 | INFO     | image_processing_api | process_images:909 | Request b27b745e: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:42:58,620 | INFO     | image_processing_api | add_request_id:184 | Request b27b745e completed: 200 in 17.975s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 18:46:07,823 | INFO     | image_processing_api | add_request_id:177 | Request 97a8a1d9 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 18:46:14,420 | INFO     | image_processing_api | process_images:872 | Request 97a8a1d9: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 18:46:14,421 | INFO     | image_processing_api | process_images:880 | Request 97a8a1d9: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 18:46:14,423 | DEBUG    | image_processing_api | process_images:886 | Request 97a8a1d9: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 18:46:14,423 | DEBUG    | image_processing_api | process_images:890 | Request 97a8a1d9: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 18:46:14,437 | INFO     | image_processing_api | process_images:895 | Request 97a8a1d9: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 18:46:14,437 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 18:46:14,437 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 18:46:14,453 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 18:46:14,453 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 18:46:14,454 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 18:46:14,454 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 18:46:14,454 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:46:14,454 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:46:14,454 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 18:46:14,454 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 18:46:14,454 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 18:46:14,458 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 18:46:14,458 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 18:46:14,458 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 18:46:14,458 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:46:14,459 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:46:14,459 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 18:46:14,459 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 18:46:14,459 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 18:46:14,459 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 18:46:14,459 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 18:46:14,459 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 18:46:14,459 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 18:46:14,459 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 18:46:14,459 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 18:46:14,459 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 18:46:14,460 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 18:46:14,460 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 18:46:14,460 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 18:46:14,460 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 18:46:14,460 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:46:14,460 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:46:14,460 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:46:14,671 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:46:14,683 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:46:16,884 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 18:46:16,884 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 18:46:16,884 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:46:16,885 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 18:46:16,885 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 18:46:16,885 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 18:46:16,885 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:46:16,885 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:46:16,885 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:46:17,103 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:46:17,115 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:46:17,116 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 18:46:17,116 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 18:46:18,770 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 18:46:18,770 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 18:46:18,770 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 18:46:18,771 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:46:18,771 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 18:46:18,771 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 18:46:18,771 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 18:46:18,771 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 18:46:18,771 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 18:46:18,771 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 18:46:18,771 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:46:19,000 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:46:19,011 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:46:19,011 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 18:46:21,125 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt with a colorful cartoon graphic featuring Rick Sanchez on the back... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 18:46:21,126 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 18:46:21,126 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 18:46:21,126 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpp0kehs69/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 18:46:21,349 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 18:46:21,360 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 18:46:24,603 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt has a vibrant, colorful graphic on the front that includes red, blue, and white text.
- The fit of the t-shirt is more relaxed, with dropped shoulders and a longer cut that extends past the waist.
- The pants appear to have a slightly tapered leg for a more streamlined look.
- The footwear is white with a chunky sole, featuring a design that combines both casual and sporty elements. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 18:46:25,108 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 18:46:25,109 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 18:46:25,109 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt with a colorful cartoon graphic featuring Rick Sanchez on the back... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 18:46:25,109 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt with a colorful cartoon graphic featuring Rick Sanchez on the back... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 18:46:25,109 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt with a colorful cartoon graphic featuring Rick Sanchez on the back... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 18:46:25,109 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 18:46:25,109 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 18:46:25,110 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 18:46:25,110 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 18:46:25,110 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 18:46:25,110 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 18:46:25,110 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 18:46:25,110 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 18:46:25,110 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 18:46:25,110 | INFO     | image_processing_api | process_images:902 | Request 97a8a1d9: Processing completed in 10.674s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 18:46:25,111 | DEBUG    | image_processing_api | process_images:907 | Request 97a8a1d9: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 18:46:25,111 | INFO     | image_processing_api | process_images:909 | Request 97a8a1d9: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 18:46:25,118 | INFO     | image_processing_api | add_request_id:184 | Request 97a8a1d9 completed: 200 in 17.296s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 19:07:37,442 | INFO     | image_processing_api | add_request_id:177 | Request 9e6222a2 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 19:07:40,071 | INFO     | image_processing_api | process_images:872 | Request 9e6222a2: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 19:07:40,072 | INFO     | image_processing_api | process_images:880 | Request 9e6222a2: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 19:07:40,076 | DEBUG    | image_processing_api | process_images:886 | Request 9e6222a2: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 19:07:40,077 | DEBUG    | image_processing_api | process_images:890 | Request 9e6222a2: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 19:07:40,085 | INFO     | image_processing_api | process_images:895 | Request 9e6222a2: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 19:07:40,086 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 19:07:40,086 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 19:07:40,102 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 19:07:40,102 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 19:07:40,102 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 19:07:40,102 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 19:07:40,102 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:07:40,102 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:07:40,102 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:07:40,103 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 19:07:40,103 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 19:07:40,106 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 19:07:40,107 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 19:07:40,107 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 19:07:40,107 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:07:40,108 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:07:40,108 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:07:40,108 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 19:07:40,108 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 19:07:40,108 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 19:07:40,108 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 19:07:40,108 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 19:07:40,108 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 19:07:40,108 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 19:07:40,108 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 19:07:40,109 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 19:07:40,109 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 19:07:40,109 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 19:07:40,109 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 19:07:40,109 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 19:07:40,109 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:07:40,109 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:07:40,109 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:07:40,324 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:07:40,335 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:07:43,109 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 19:07:43,110 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 19:07:43,110 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:07:43,110 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 19:07:43,110 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 19:07:43,110 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 19:07:43,110 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:07:43,111 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:07:43,111 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:07:43,348 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:07:43,359 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:07:43,359 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 19:07:43,359 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 19:07:44,973 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 19:07:44,973 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 19:07:44,974 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 19:07:44,974 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:07:44,974 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 19:07:44,974 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 19:07:44,974 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 19:07:44,974 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:07:44,974 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:07:44,974 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 19:07:44,974 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:07:45,197 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:07:45,208 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:07:45,209 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 19:07:47,286 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a colorful graphic illustration of a character named Ric... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 19:07:47,286 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 19:07:47,287 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 19:07:47,287 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpiqqv_tvh/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:07:47,509 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:07:47,519 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:07:51,237 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt features a small, colorful graphic on the front, which contrasts with the back design mentioned in the base description.
- The fit of the t-shirt appears slightly more tailored rather than oversized, with shorter sleeves that give a relaxed yet structured look.
- The shorts have been replaced with black loose-fitting pants that taper slightly at the ankles, providing a different silhouette.
- The footwear is now specified as white sneakers with a design that includes a darker sole for contrast, differing from the previously mentioned | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 19:07:51,742 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 19:07:51,743 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:07:51,743 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a colorful graphic illustration of a character named Ric... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 19:07:51,743 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a colorful graphic illustration of a character named Ric... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 19:07:51,743 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a colorful graphic illustration of a character named Ric... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 19:07:51,744 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 19:07:51,744 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 19:07:51,744 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 19:07:51,744 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 19:07:51,744 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 19:07:51,745 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 19:07:51,745 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 19:07:51,745 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 19:07:51,745 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 19:07:51,745 | INFO     | image_processing_api | process_images:902 | Request 9e6222a2: Processing completed in 11.660s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 19:07:51,746 | DEBUG    | image_processing_api | process_images:907 | Request 9e6222a2: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 19:07:51,746 | INFO     | image_processing_api | process_images:909 | Request 9e6222a2: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 19:07:51,753 | INFO     | image_processing_api | add_request_id:184 | Request 9e6222a2 completed: 200 in 14.313s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 19:14:21,376 | INFO     | image_processing_api | add_request_id:177 | Request a207fcb9 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 19:14:24,169 | INFO     | image_processing_api | process_images:872 | Request a207fcb9: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 19:14:24,170 | INFO     | image_processing_api | process_images:880 | Request a207fcb9: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 19:14:24,171 | DEBUG    | image_processing_api | process_images:886 | Request a207fcb9: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 19:14:24,171 | DEBUG    | image_processing_api | process_images:890 | Request a207fcb9: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 19:14:24,177 | INFO     | image_processing_api | process_images:895 | Request a207fcb9: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 19:14:24,177 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 19:14:24,177 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 19:14:24,190 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 19:14:24,190 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 19:14:24,191 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 19:14:24,191 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 19:14:24,191 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:14:24,191 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:14:24,191 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:14:24,191 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 19:14:24,191 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 19:14:24,194 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 19:14:24,194 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 19:14:24,194 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 19:14:24,194 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:14:24,194 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:14:24,194 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:14:24,194 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 19:14:24,194 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 19:14:24,194 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 19:14:24,194 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 19:14:24,194 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 19:14:24,194 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 19:14:24,194 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 19:14:24,195 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 19:14:24,195 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 19:14:24,195 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 19:14:24,195 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 19:14:24,195 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 19:14:24,195 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 19:14:24,195 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:14:24,195 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:14:24,195 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:14:24,427 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:14:24,439 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:14:26,163 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 19:14:26,164 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 19:14:26,164 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:14:26,164 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 19:14:26,164 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 19:14:26,164 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 19:14:26,164 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:14:26,164 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:14:26,164 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:14:26,378 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:14:26,390 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:14:26,390 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 19:14:26,390 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 19:14:27,526 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 19:14:27,527 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 19:14:27,527 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 19:14:27,527 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:14:27,527 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 19:14:27,527 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 19:14:27,528 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 19:14:27,528 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:14:27,528 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:14:27,528 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 19:14:27,528 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:14:27,747 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:14:27,758 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:14:27,758 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 19:14:32,895 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a colorful graphic design of Rick Sanchez on the back, p... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 19:14:32,895 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 19:14:32,895 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 19:14:32,895 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp45s300vn/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:14:33,122 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:14:33,132 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:14:36,512 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt has a small, colorful graphic design on the front, reading "GENIUS," in addition to the larger graphic on the back.
- The t-shirt appears to have a slightly relaxed fit, with wider sleeves and a longer hem.
- The trousers are streamlined, with a more tailored fit around the ankles.
- The sneakers are white with black soles and have a sporty design, possibly featuring distinctive lacing or detailing. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 19:14:37,016 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 19:14:37,016 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:14:37,016 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a colorful graphic design of Rick Sanchez on the back, p... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 19:14:37,016 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a colorful graphic design of Rick Sanchez on the back, p... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 19:14:37,016 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a colorful graphic design of Rick Sanchez on the back, p... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 19:14:37,017 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 19:14:37,017 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 19:14:37,017 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 19:14:37,017 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 19:14:37,017 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 19:14:37,017 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 19:14:37,017 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 19:14:37,017 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 19:14:37,017 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 19:14:37,018 | INFO     | image_processing_api | process_images:902 | Request a207fcb9: Processing completed in 12.841s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 19:14:37,019 | DEBUG    | image_processing_api | process_images:907 | Request a207fcb9: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 19:14:37,019 | INFO     | image_processing_api | process_images:909 | Request a207fcb9: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 19:14:37,026 | INFO     | image_processing_api | add_request_id:184 | Request a207fcb9 completed: 200 in 15.650s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 19:27:56,666 | INFO     | image_processing_api | add_request_id:177 | Request 6f820814 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 19:27:59,006 | INFO     | image_processing_api | process_images:872 | Request 6f820814: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 19:27:59,006 | INFO     | image_processing_api | process_images:880 | Request 6f820814: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 19:27:59,009 | DEBUG    | image_processing_api | process_images:886 | Request 6f820814: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 19:27:59,009 | DEBUG    | image_processing_api | process_images:890 | Request 6f820814: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 19:27:59,016 | INFO     | image_processing_api | process_images:895 | Request 6f820814: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 19:27:59,016 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 19:27:59,017 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 19:27:59,043 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 19:27:59,044 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 19:27:59,044 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 19:27:59,044 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 19:27:59,044 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:27:59,044 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:27:59,044 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:27:59,044 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 19:27:59,045 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 19:27:59,048 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 19:27:59,049 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 19:27:59,049 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 19:27:59,049 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:27:59,049 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:27:59,049 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:27:59,049 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 19:27:59,049 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 19:27:59,049 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 19:27:59,050 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 19:27:59,050 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 19:27:59,050 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 19:27:59,050 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 19:27:59,050 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 19:27:59,050 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 19:27:59,050 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 19:27:59,050 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 19:27:59,050 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 19:27:59,050 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 19:27:59,050 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:27:59,050 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:27:59,050 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:27:59,272 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:27:59,285 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:28:03,320 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 19:28:03,321 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 19:28:03,321 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:28:03,321 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 19:28:03,321 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 19:28:03,321 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 19:28:03,321 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:28:03,321 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:28:03,321 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:28:03,548 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:28:03,559 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:28:03,560 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 19:28:03,560 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 19:28:04,732 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 19:28:04,732 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 19:28:04,732 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 19:28:04,732 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:28:04,732 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 19:28:04,732 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 19:28:04,732 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 19:28:04,732 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:28:04,732 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:28:04,733 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 19:28:04,733 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:28:04,959 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:28:04,970 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:28:04,970 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 19:28:07,772 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a vibrant graphic print on the back that depicts the cha... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 19:28:07,772 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 19:28:07,772 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 19:28:07,772 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdxmzyyn9/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:28:07,979 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:28:07,989 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:28:10,439 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt features a smaller graphic on the front, displaying the word "GENIUS" in colorful letters.
- The trousers appear to have a relaxed fit, providing a more casual aesthetic.
- The footwear is a pair of white sneakers with a chunky sole, distinctly different from the initial description. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 19:28:10,944 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 19:28:10,945 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:28:10,945 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a vibrant graphic print on the back that depicts the cha... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 19:28:10,945 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a vibrant graphic print on the back that depicts the cha... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 19:28:10,945 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a vibrant graphic print on the back that depicts the cha... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 19:28:10,946 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 19:28:10,946 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 19:28:10,946 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 19:28:10,946 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 19:28:10,946 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 19:28:10,946 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 19:28:10,946 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 19:28:10,946 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 19:28:10,947 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 19:28:10,947 | INFO     | image_processing_api | process_images:902 | Request 6f820814: Processing completed in 11.930s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 19:28:10,947 | DEBUG    | image_processing_api | process_images:907 | Request 6f820814: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 19:28:10,947 | INFO     | image_processing_api | process_images:909 | Request 6f820814: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 19:28:10,954 | INFO     | image_processing_api | add_request_id:184 | Request 6f820814 completed: 200 in 14.289s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 19:36:59,336 | INFO     | image_processing_api | add_request_id:177 | Request d2be93f1 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 19:37:02,498 | INFO     | image_processing_api | process_images:872 | Request d2be93f1: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 19:37:02,498 | INFO     | image_processing_api | process_images:880 | Request d2be93f1: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 19:37:02,500 | DEBUG    | image_processing_api | process_images:886 | Request d2be93f1: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 19:37:02,500 | DEBUG    | image_processing_api | process_images:890 | Request d2be93f1: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 19:37:02,512 | INFO     | image_processing_api | process_images:895 | Request d2be93f1: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 19:37:02,512 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 19:37:02,513 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 19:37:02,528 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 19:37:02,528 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 19:37:02,528 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 19:37:02,528 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 19:37:02,528 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:37:02,529 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:37:02,529 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:37:02,529 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 19:37:02,529 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 19:37:02,532 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 19:37:02,532 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 19:37:02,532 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 19:37:02,532 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:37:02,533 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:37:02,533 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:37:02,533 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 19:37:02,533 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 19:37:02,533 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 19:37:02,533 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 19:37:02,533 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 19:37:02,533 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 19:37:02,533 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 19:37:02,534 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 19:37:02,534 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 19:37:02,534 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 19:37:02,534 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 19:37:02,534 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 19:37:02,534 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 19:37:02,534 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:37:02,534 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:37:02,534 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:37:02,748 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:37:02,761 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:37:04,279 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 19:37:04,279 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 19:37:04,279 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:37:04,279 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 19:37:04,280 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 19:37:04,280 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 19:37:04,280 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:37:04,280 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:37:04,280 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:37:04,506 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:37:04,517 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:37:04,518 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 19:37:04,518 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 19:37:07,344 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 19:37:07,345 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 19:37:07,345 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 19:37:07,345 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:37:07,345 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 19:37:07,346 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 19:37:07,346 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 19:37:07,346 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:37:07,346 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:37:07,346 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 19:37:07,346 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:37:07,574 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:37:07,585 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:37:07,585 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 19:37:10,266 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 19:37:10,266 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 19:37:10,266 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 19:37:10,266 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpdruandhg/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:37:10,490 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:37:10,499 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:37:13,312 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt features a smaller, colorful graphic on the front that reads "GENIUS" with a mix of red, blue, and white lettering.
- The shorts have been replaced with black tapered pants that appear to be made from a smoother, possibly lighter fabric than the shorts.
- The footwear consists of white sneakers with a sleek design and thicker soles, offering a more sporty appearance compared to casual sneakers. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 19:37:13,815 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 19:37:13,816 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:37:13,816 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 19:37:13,816 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 19:37:13,816 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 19:37:13,816 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 19:37:13,816 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 19:37:13,816 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 19:37:13,817 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 19:37:13,817 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 19:37:13,817 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 19:37:13,817 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 19:37:13,817 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 19:37:13,817 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 19:37:13,817 | INFO     | image_processing_api | process_images:902 | Request d2be93f1: Processing completed in 11.305s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 19:37:13,818 | DEBUG    | image_processing_api | process_images:907 | Request d2be93f1: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 19:37:13,818 | INFO     | image_processing_api | process_images:909 | Request d2be93f1: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 19:37:13,825 | INFO     | image_processing_api | add_request_id:184 | Request d2be93f1 completed: 200 in 14.489s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 19:43:50,244 | INFO     | image_processing_api | add_request_id:177 | Request cf0ad14c started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 19:43:52,827 | INFO     | image_processing_api | process_images:872 | Request cf0ad14c: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 19:43:52,827 | INFO     | image_processing_api | process_images:880 | Request cf0ad14c: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 19:43:52,829 | DEBUG    | image_processing_api | process_images:886 | Request cf0ad14c: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 19:43:52,830 | DEBUG    | image_processing_api | process_images:890 | Request cf0ad14c: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 19:43:52,835 | INFO     | image_processing_api | process_images:895 | Request cf0ad14c: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 19:43:52,835 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 19:43:52,835 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 19:43:52,845 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 19:43:52,846 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 19:43:52,846 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 19:43:52,846 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 19:43:52,846 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:43:52,846 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:43:52,846 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:43:52,846 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 19:43:52,846 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 19:43:52,850 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 19:43:52,850 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 19:43:52,850 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 19:43:52,850 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:43:52,850 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:43:52,850 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:43:52,850 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 19:43:52,851 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 19:43:52,851 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 19:43:52,851 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 19:43:52,851 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 19:43:52,851 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 19:43:52,851 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 19:43:52,852 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 19:43:52,852 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 19:43:52,852 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 19:43:52,852 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 19:43:52,852 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 19:43:52,852 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 19:43:52,852 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:43:52,852 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:43:52,852 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:43:53,067 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:43:53,079 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:43:55,104 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 19:43:55,104 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 19:43:55,105 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:43:55,105 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 19:43:55,105 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 19:43:55,105 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 19:43:55,105 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:43:55,106 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:43:55,106 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:43:55,328 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:43:55,338 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:43:55,339 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 19:43:55,339 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 19:43:57,186 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 19:43:57,187 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 19:43:57,187 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 19:43:57,187 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:43:57,187 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 19:43:57,188 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 19:43:57,188 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 19:43:57,188 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:43:57,188 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:43:57,188 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 19:43:57,188 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:43:57,416 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:43:57,428 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:43:57,428 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 19:44:02,379 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized graphic t-shirt featuring an illustration of Rick Sanchez from the animate... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 19:44:02,380 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 19:44:02,380 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 19:44:02,380 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7wz0398c/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:44:02,604 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:44:02,615 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:44:05,769 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt has a different graphic, prominently displaying the word "GENIUS" in red, blue, and white colors, suggesting a more minimalistic design compared to the original Rick Sanchez illustration.
- The shorts have been replaced with black, loose-fit trousers, which appear to be made from a smoother fabric, likely a blend of cotton and polyester, providing a slightly dressier look.
- Footwear consists of white sneakers with a chunky sole, offering more cushioning and a casual vibe. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 19:44:06,274 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 19:44:06,277 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:44:06,278 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized graphic t-shirt featuring an illustration of Rick Sanchez from the animate... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 19:44:06,279 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized graphic t-shirt featuring an illustration of Rick Sanchez from the animate... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 19:44:06,279 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized graphic t-shirt featuring an illustration of Rick Sanchez from the animate... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 19:44:06,280 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 19:44:06,280 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 19:44:06,280 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 19:44:06,280 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 19:44:06,281 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 19:44:06,281 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 19:44:06,281 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 19:44:06,281 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 19:44:06,281 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 19:44:06,281 | INFO     | image_processing_api | process_images:902 | Request cf0ad14c: Processing completed in 13.446s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 19:44:06,282 | DEBUG    | image_processing_api | process_images:907 | Request cf0ad14c: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 19:44:06,282 | INFO     | image_processing_api | process_images:909 | Request cf0ad14c: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 19:44:06,294 | INFO     | image_processing_api | add_request_id:184 | Request cf0ad14c completed: 200 in 16.050s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 19:51:10,944 | INFO     | image_processing_api | add_request_id:177 | Request 51895e27 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 19:51:13,462 | INFO     | image_processing_api | process_images:872 | Request 51895e27: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 19:51:13,462 | INFO     | image_processing_api | process_images:880 | Request 51895e27: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 19:51:13,462 | DEBUG    | image_processing_api | process_images:886 | Request 51895e27: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 19:51:13,463 | DEBUG    | image_processing_api | process_images:890 | Request 51895e27: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 19:51:13,479 | INFO     | image_processing_api | process_images:895 | Request 51895e27: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 19:51:13,479 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 19:51:13,479 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 19:51:13,493 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 19:51:13,493 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 19:51:13,493 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 19:51:13,493 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 19:51:13,493 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:51:13,493 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:51:13,493 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:51:13,493 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 19:51:13,493 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 19:51:13,497 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 19:51:13,497 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 19:51:13,497 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 19:51:13,497 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:51:13,497 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:51:13,497 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:51:13,497 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 19:51:13,497 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 19:51:13,497 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 19:51:13,497 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 19:51:13,497 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 19:51:13,497 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 19:51:13,497 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 19:51:13,497 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 19:51:13,497 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 19:51:13,497 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 19:51:13,497 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 19:51:13,497 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 19:51:13,497 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 19:51:13,498 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:51:13,498 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:51:13,498 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:51:13,706 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:51:13,718 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:51:15,795 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 19:51:15,795 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 19:51:15,795 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:51:15,795 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 19:51:15,796 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 19:51:15,796 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 19:51:15,796 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:51:15,796 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:51:15,796 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:51:16,027 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:51:16,038 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:51:16,038 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 19:51:16,038 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 19:51:17,939 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 19:51:17,939 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 19:51:17,939 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 19:51:17,939 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:51:17,940 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 19:51:17,940 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 19:51:17,940 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 19:51:17,940 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:51:17,940 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:51:17,940 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 19:51:17,940 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:51:18,171 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:51:18,181 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:51:18,181 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 19:51:21,195 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a colorful graphic print of a character named Rick Sanch... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 19:51:21,196 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 19:51:21,196 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 19:51:21,196 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpucnucn5v/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:51:21,385 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:51:21,396 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:51:23,124 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:645 | No additional details from image 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:645
2025-08-25 19:51:23,629 | INFO     | image_processing_api | _generate_comprehensive_description_internal:665 | No additional details found, using base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-25 19:51:23,630 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:51:23,631 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a colorful graphic print of a character named Rick Sanch... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 19:51:23,631 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a colorful graphic print of a character named Rick Sanch... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 19:51:23,631 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a colorful graphic print of a character named Rick Sanch... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 19:51:23,631 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 19:51:23,632 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 19:51:23,632 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 19:51:23,632 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 19:51:23,632 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 19:51:23,632 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 19:51:23,632 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 19:51:23,632 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 19:51:23,632 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 19:51:23,633 | INFO     | image_processing_api | process_images:902 | Request 51895e27: Processing completed in 10.154s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 19:51:23,634 | DEBUG    | image_processing_api | process_images:907 | Request 51895e27: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 19:51:23,634 | INFO     | image_processing_api | process_images:909 | Request 51895e27: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 19:51:23,640 | INFO     | image_processing_api | add_request_id:184 | Request 51895e27 completed: 200 in 12.697s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 19:57:00,388 | INFO     | image_processing_api | add_request_id:177 | Request 4b586e3d started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 19:57:03,123 | INFO     | image_processing_api | process_images:872 | Request 4b586e3d: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 19:57:03,125 | INFO     | image_processing_api | process_images:880 | Request 4b586e3d: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 19:57:03,131 | DEBUG    | image_processing_api | process_images:886 | Request 4b586e3d: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 19:57:03,132 | DEBUG    | image_processing_api | process_images:890 | Request 4b586e3d: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 19:57:03,149 | INFO     | image_processing_api | process_images:895 | Request 4b586e3d: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 19:57:03,150 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 19:57:03,150 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 19:57:03,165 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 19:57:03,166 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 19:57:03,166 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 19:57:03,166 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 19:57:03,166 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:57:03,166 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:57:03,166 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 19:57:03,166 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 19:57:03,167 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 19:57:03,169 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 19:57:03,169 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 19:57:03,169 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 19:57:03,169 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:57:03,170 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:57:03,170 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 19:57:03,170 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 19:57:03,170 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 19:57:03,170 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 19:57:03,170 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 19:57:03,170 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 19:57:03,170 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 19:57:03,170 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 19:57:03,171 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 19:57:03,171 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 19:57:03,171 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 19:57:03,171 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 19:57:03,171 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 19:57:03,171 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 19:57:03,171 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:57:03,171 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:57:03,172 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:57:03,385 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:57:03,397 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:57:05,239 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 19:57:05,239 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 19:57:05,239 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:57:05,239 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 19:57:05,239 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 19:57:05,239 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 19:57:05,239 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:57:05,239 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:57:05,240 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:57:05,464 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:57:05,475 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:57:05,475 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 19:57:05,475 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 19:57:07,099 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 19:57:07,099 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 19:57:07,100 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 19:57:07,100 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:57:07,100 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 19:57:07,100 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 19:57:07,100 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 19:57:07,100 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 19:57:07,100 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 19:57:07,100 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 19:57:07,101 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:57:07,326 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:57:07,336 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:57:07,337 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 19:57:10,213 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character with a sc... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 19:57:10,213 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 19:57:10,213 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 19:57:10,213 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp7ru9_p5p/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 19:57:10,435 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 19:57:10,445 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 19:57:13,674 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The graphic t-shirt features a small logo in vibrant colors (red, blue, and white) near the top center, rather than a large character illustration.
- The fit of the t-shirt appears more tailored at the shoulders, with a slightly relaxed body style that drapes down rather than being oversized.
- The pants are styled with a tapered fit, providing a more structured silhouette compared to truly relaxed-fit pants.
- The sneakers are white with a subtle design, including a textured sole and laces | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 19:57:14,176 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 19:57:14,177 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 19:57:14,177 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character with a sc... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 19:57:14,177 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character with a sc... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 19:57:14,178 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized graphic t-shirt featuring a colorful illustration of a character with a sc... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 19:57:14,178 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 19:57:14,178 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 19:57:14,178 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 19:57:14,178 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 19:57:14,178 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 19:57:14,179 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 19:57:14,179 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 19:57:14,179 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 19:57:14,179 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 19:57:14,179 | INFO     | image_processing_api | process_images:902 | Request 4b586e3d: Processing completed in 11.030s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 19:57:14,181 | DEBUG    | image_processing_api | process_images:907 | Request 4b586e3d: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 19:57:14,181 | INFO     | image_processing_api | process_images:909 | Request 4b586e3d: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 19:57:14,184 | INFO     | image_processing_api | add_request_id:184 | Request 4b586e3d completed: 200 in 13.797s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 21:17:46,195 | INFO     | image_processing_api | add_request_id:177 | Request 6a197d11 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 21:17:49,380 | INFO     | image_processing_api | process_images:872 | Request 6a197d11: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 21:17:49,380 | INFO     | image_processing_api | process_images:880 | Request 6a197d11: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 21:17:49,384 | DEBUG    | image_processing_api | process_images:886 | Request 6a197d11: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 21:17:49,384 | DEBUG    | image_processing_api | process_images:890 | Request 6a197d11: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 21:17:49,392 | INFO     | image_processing_api | process_images:895 | Request 6a197d11: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 21:17:49,392 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 21:17:49,392 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 21:17:49,406 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 21:17:49,406 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 21:17:49,406 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 21:17:49,407 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 21:17:49,407 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:17:49,407 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:17:49,407 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:17:49,407 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 21:17:49,407 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 21:17:49,411 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 21:17:49,412 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 21:17:49,412 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 21:17:49,412 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:17:49,413 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:17:49,413 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:17:49,413 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 21:17:49,413 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 21:17:49,413 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 21:17:49,413 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 21:17:49,413 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 21:17:49,413 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 21:17:49,414 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 21:17:49,414 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 21:17:49,414 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 21:17:49,414 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 21:17:49,414 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 21:17:49,414 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 21:17:49,414 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 21:17:49,414 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:17:49,414 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:17:49,414 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:17:49,628 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:17:49,639 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:17:51,971 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 21:17:51,972 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 21:17:51,972 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:17:51,972 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 21:17:51,972 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 21:17:51,972 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 21:17:51,972 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:17:51,972 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:17:51,972 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:17:52,189 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:17:52,200 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:17:52,200 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 21:17:52,200 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 21:17:53,691 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 21:17:53,691 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 21:17:53,691 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 21:17:53,692 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:17:53,692 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 21:17:53,692 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 21:17:53,692 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 21:17:53,692 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:17:53,692 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:17:53,692 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 21:17:53,692 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:17:53,922 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:17:53,933 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:17:53,934 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 21:17:56,202 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a vibrant graphic print of Rick Sanchez on the back, pai... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 21:17:56,202 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 21:17:56,203 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 21:17:56,203 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpo27kx9vy/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:17:56,421 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:17:56,432 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:17:59,406 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt has a small graphic logo on the front in red, blue, and white.
- The fit of the t-shirt appears to be more relaxed and slightly longer than described.
- The shorts have been replaced with black relaxed-fit pants, which are tapered at the ankle.
- Footwear consists of white sneakers with a slightly chunky design.
- The overall fabric of the outfit looks soft and breathable, likely cotton or a cotton blend. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 21:17:59,912 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 21:17:59,913 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:17:59,913 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a vibrant graphic print of Rick Sanchez on the back, pai... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 21:17:59,913 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a vibrant graphic print of Rick Sanchez on the back, pai... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 21:17:59,913 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a vibrant graphic print of Rick Sanchez on the back, pai... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 21:17:59,913 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 21:17:59,913 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 21:17:59,913 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 21:17:59,913 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 21:17:59,913 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 21:17:59,914 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 21:17:59,914 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 21:17:59,914 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 21:17:59,914 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 21:17:59,914 | INFO     | image_processing_api | process_images:902 | Request 6a197d11: Processing completed in 10.522s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 21:17:59,915 | DEBUG    | image_processing_api | process_images:907 | Request 6a197d11: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 21:17:59,915 | INFO     | image_processing_api | process_images:909 | Request 6a197d11: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 21:17:59,930 | INFO     | image_processing_api | add_request_id:184 | Request 6a197d11 completed: 200 in 13.737s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 21:30:26,218 | INFO     | image_processing_api | add_request_id:177 | Request 10f1037c started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 21:30:30,037 | INFO     | image_processing_api | process_images:872 | Request 10f1037c: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 21:30:30,038 | INFO     | image_processing_api | process_images:880 | Request 10f1037c: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 21:30:30,040 | DEBUG    | image_processing_api | process_images:886 | Request 10f1037c: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 21:30:30,041 | DEBUG    | image_processing_api | process_images:890 | Request 10f1037c: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 21:30:30,045 | INFO     | image_processing_api | process_images:895 | Request 10f1037c: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 21:30:30,045 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 21:30:30,045 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 21:30:30,062 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 21:30:30,063 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 21:30:30,063 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 21:30:30,063 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 21:30:30,063 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:30:30,063 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:30:30,063 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:30:30,063 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 21:30:30,064 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 21:30:30,066 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 21:30:30,066 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 21:30:30,067 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 21:30:30,067 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:30:30,067 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:30:30,067 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:30:30,067 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 21:30:30,067 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 21:30:30,068 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 21:30:30,068 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 21:30:30,068 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 21:30:30,068 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 21:30:30,069 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 21:30:30,069 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 21:30:30,069 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 21:30:30,069 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 21:30:30,069 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 21:30:30,069 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 21:30:30,069 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 21:30:30,069 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:30:30,069 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:30:30,069 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:30:30,302 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:30:30,316 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:30:34,730 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 21:30:34,732 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 21:30:34,732 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:30:34,733 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 21:30:34,733 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 21:30:34,733 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 21:30:34,733 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:30:34,734 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:30:34,734 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:30:35,098 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:30:35,118 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:30:35,118 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 21:30:35,118 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 21:30:36,561 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Street1' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 21:30:36,561 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Street1' → 'Street1' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 21:30:36,561 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Street1'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 21:30:36,561 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:30:36,561 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Street1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 21:30:36,561 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 21:30:36,561 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 21:30:36,561 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:30:36,561 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:30:36,562 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 21:30:36,562 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:30:36,799 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:30:36,811 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:30:36,811 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 21:30:39,817 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a vibrant graphic print of Rick Sanchez from the animate... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 21:30:39,817 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 21:30:39,818 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 21:30:39,818 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmphd18m4ti/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:30:40,047 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:30:40,058 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:30:43,496 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt features a smaller graphic design on the front, possibly reading "GENIUS," instead of a larger Rick Sanchez graphic.
- The fabric of the t-shirt appears to be a thicker cotton blend, giving it a more structured fit.
- The relaxed-fit pants have a slightly tapered leg and a more defined silhouette than initially described.
- The sneakers are white with a distinct textured sole and subtle black detailing. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 21:30:44,002 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 21:30:44,005 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:30:44,005 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a vibrant graphic print of Rick Sanchez from the animate... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 21:30:44,005 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a vibrant graphic print of Rick Sanchez from the animate... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 21:30:44,005 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a vibrant graphic print of Rick Sanchez from the animate... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 21:30:44,005 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Street1'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 21:30:44,005 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 21:30:44,006 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 21:30:44,006 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Street1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 21:30:44,006 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Street1 → Street1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 21:30:44,006 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Street1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 21:30:44,006 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 21:30:44,006 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 21:30:44,007 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 21:30:44,007 | INFO     | image_processing_api | process_images:902 | Request 10f1037c: Processing completed in 13.961s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 21:30:44,007 | DEBUG    | image_processing_api | process_images:907 | Request 10f1037c: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 21:30:44,007 | INFO     | image_processing_api | process_images:909 | Request 10f1037c: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 21:30:44,011 | INFO     | image_processing_api | add_request_id:184 | Request 10f1037c completed: 200 in 17.794s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 21:42:11,374 | INFO     | image_processing_api | add_request_id:177 | Request 8b017b90 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 21:42:14,286 | INFO     | image_processing_api | process_images:872 | Request 8b017b90: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 21:42:14,288 | INFO     | image_processing_api | process_images:880 | Request 8b017b90: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 21:42:14,288 | DEBUG    | image_processing_api | process_images:886 | Request 8b017b90: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 21:42:14,288 | DEBUG    | image_processing_api | process_images:890 | Request 8b017b90: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 21:42:14,297 | INFO     | image_processing_api | process_images:895 | Request 8b017b90: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 21:42:14,297 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 21:42:14,298 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 21:42:14,320 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 21:42:14,321 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 21:42:14,321 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 21:42:14,321 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 21:42:14,321 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:42:14,321 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:42:14,321 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:42:14,321 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 21:42:14,321 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 21:42:14,324 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 21:42:14,324 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 21:42:14,324 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 21:42:14,325 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:42:14,325 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:42:14,325 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:42:14,325 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 21:42:14,326 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 21:42:14,326 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 21:42:14,326 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 21:42:14,326 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 21:42:14,326 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 21:42:14,326 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 21:42:14,328 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 21:42:14,328 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 21:42:14,328 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 21:42:14,328 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 21:42:14,328 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 21:42:14,329 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 21:42:14,329 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:42:14,329 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:42:14,329 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:42:14,613 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:42:14,626 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:42:16,295 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 21:42:16,295 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 21:42:16,295 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:42:16,295 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 21:42:16,295 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 21:42:16,295 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 21:42:16,295 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:42:16,296 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:42:16,296 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:42:16,532 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:42:16,543 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:42:16,544 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 21:42:16,544 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 21:42:19,005 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 21:42:19,005 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 21:42:19,005 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 21:42:19,006 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:42:19,006 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 21:42:19,006 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 21:42:19,006 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 21:42:19,006 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:42:19,006 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:42:19,006 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 21:42:19,006 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:42:19,217 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:42:19,229 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:42:19,230 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 21:42:23,370 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized t-shirt featuring a graphic print of Rick Sanchez on the back, highlighted... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 21:42:23,371 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 21:42:23,371 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 21:42:23,371 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpwm4miis3/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:42:23,589 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:42:23,600 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:42:26,189 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt has a small graphic design on the front featuring the text "GENIUS" in colorful letters, contrasting with the predominantly black fabric.
- The fit of the t-shirt appears looser, with dropped shoulders and a relaxed silhouette.
- The trousers are clearly identified as black relaxed-fit, offering a comfortable and casual style.
- The footwear is white sneakers with a chunky sole, adding a sporty touch to the outfit. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 21:42:26,705 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 21:42:26,706 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:42:26,707 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized t-shirt featuring a graphic print of Rick Sanchez on the back, highlighted... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 21:42:26,707 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized t-shirt featuring a graphic print of Rick Sanchez on the back, highlighted... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 21:42:26,707 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a graphic print of Rick Sanchez on the back, highlighted... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 21:42:26,707 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 21:42:26,707 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 21:42:26,707 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 21:42:26,707 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 21:42:26,707 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 21:42:26,707 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 21:42:26,708 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 21:42:26,708 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 21:42:26,708 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 21:42:26,708 | INFO     | image_processing_api | process_images:902 | Request 8b017b90: Processing completed in 12.411s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 21:42:26,709 | DEBUG    | image_processing_api | process_images:907 | Request 8b017b90: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 21:42:26,709 | INFO     | image_processing_api | process_images:909 | Request 8b017b90: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 21:42:26,714 | INFO     | image_processing_api | add_request_id:184 | Request 8b017b90 completed: 200 in 15.340s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-25 21:42:37,839 | INFO     | image_processing_api | add_request_id:177 | Request 0dd7d137 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:177
2025-08-25 21:42:40,542 | INFO     | image_processing_api | process_images:872 | Request 0dd7d137: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:872
2025-08-25 21:42:40,543 | INFO     | image_processing_api | process_images:880 | Request 0dd7d137: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:880
2025-08-25 21:42:40,544 | DEBUG    | image_processing_api | process_images:886 | Request 0dd7d137: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:886
2025-08-25 21:42:40,544 | DEBUG    | image_processing_api | process_images:890 | Request 0dd7d137: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:890
2025-08-25 21:42:40,553 | INFO     | image_processing_api | process_images:895 | Request 0dd7d137: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:895
2025-08-25 21:42:40,553 | INFO     | image_processing_api | process_zip_file:694 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:694
2025-08-25 21:42:40,553 | DEBUG    | image_processing_api | process_zip_file:698 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:698
2025-08-25 21:42:40,567 | INFO     | image_processing_api | process_zip_file:702 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:702
2025-08-25 21:42:40,568 | DEBUG    | image_processing_api | process_zip_file:711 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-25 21:42:40,568 | DEBUG    | image_processing_api | process_zip_file:712 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:712
2025-08-25 21:42:40,568 | DEBUG    | image_processing_api | process_zip_file:713 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:713
2025-08-25 21:42:40,568 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:42:40,568 | DEBUG    | image_processing_api | process_zip_file:721 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:42:40,568 | DEBUG    | image_processing_api | process_zip_file:721 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:721
2025-08-25 21:42:40,568 | DEBUG    | image_processing_api | process_zip_file:724 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-25 21:42:40,568 | DEBUG    | image_processing_api | load_json_file:195 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:195
2025-08-25 21:42:40,571 | DEBUG    | image_processing_api | load_json_file:200 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:200
2025-08-25 21:42:40,571 | INFO     | image_processing_api | process_zip_file:737 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:737
2025-08-25 21:42:40,572 | INFO     | image_processing_api | process_zip_file:740 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:740
2025-08-25 21:42:40,573 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:42:40,574 | INFO     | image_processing_api | process_zip_file:747 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:42:40,574 | INFO     | image_processing_api | process_zip_file:747 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:747
2025-08-25 21:42:40,574 | INFO     | image_processing_api | select_all_images_per_folder:449 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:449
2025-08-25 21:42:40,574 | INFO     | image_processing_api | select_all_images_per_folder:450 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-25 21:42:40,574 | INFO     | image_processing_api | select_all_images_per_folder:451 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:451
2025-08-25 21:42:40,574 | DEBUG    | image_processing_api | select_all_images_per_folder:459 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:459
2025-08-25 21:42:40,574 | DEBUG    | image_processing_api | select_all_images_per_folder:461 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:461
2025-08-25 21:42:40,575 | INFO     | image_processing_api | select_all_images_per_folder:506 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:506
2025-08-25 21:42:40,575 | INFO     | image_processing_api | select_all_images_per_folder:515 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:515
2025-08-25 21:42:40,575 | INFO     | image_processing_api | select_all_images_per_folder:556 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:556
2025-08-25 21:42:40,575 | INFO     | image_processing_api | select_all_images_per_folder:558 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:558
2025-08-25 21:42:40,575 | INFO     | image_processing_api | process_zip_file:754 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:754
2025-08-25 21:42:40,575 | INFO     | image_processing_api | process_zip_file:759 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-25 21:42:40,575 | DEBUG    | image_processing_api | process_zip_file:765 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:765
2025-08-25 21:42:40,575 | INFO     | image_processing_api | detect_gender_from_image:400 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:400
2025-08-25 21:42:40,575 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:42:40,575 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:42:40,575 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:42:40,798 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:42:40,809 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:42:43,522 | DEBUG    | image_processing_api | _detect_gender_internal:428 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:428
2025-08-25 21:42:43,523 | INFO     | image_processing_api | _detect_gender_internal:435 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:435
2025-08-25 21:42:43,523 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:42:43,523 | INFO     | image_processing_api | process_zip_file:768 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:768
2025-08-25 21:42:43,524 | DEBUG    | image_processing_api | process_zip_file:771 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:771
2025-08-25 21:42:43,524 | INFO     | image_processing_api | get_background_suggestions:281 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:281
2025-08-25 21:42:43,524 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:42:43,524 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:42:43,524 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:42:43,783 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:42:43,796 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:42:43,796 | DEBUG    | image_processing_api | _get_background_suggestions_internal:289 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:289
2025-08-25 21:42:43,796 | DEBUG    | image_processing_api | _get_background_suggestions_internal:313 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:313
2025-08-25 21:42:46,124 | DEBUG    | image_processing_api | _get_background_suggestions_internal:327 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:327
2025-08-25 21:42:46,124 | DEBUG    | image_processing_api | _get_background_suggestions_internal:345 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:345
2025-08-25 21:42:46,124 | INFO     | image_processing_api | _get_background_suggestions_internal:348 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:348
2025-08-25 21:42:46,124 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:42:46,124 | INFO     | image_processing_api | process_zip_file:774 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:774
2025-08-25 21:42:46,124 | DEBUG    | image_processing_api | process_zip_file:777 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:777
2025-08-25 21:42:46,124 | INFO     | image_processing_api | generate_comprehensive_folder_description:563 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:563
2025-08-25 21:42:46,125 | DEBUG    | image_processing_api | api_call_with_retry:241 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:241
2025-08-25 21:42:46,125 | DEBUG    | image_processing_api | api_call_with_retry:245 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-25 21:42:46,125 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:569 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:569
2025-08-25 21:42:46,125 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:42:46,362 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:42:46,373 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:42:46,374 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:588 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:588
2025-08-25 21:42:49,754 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:602 | Base description generated: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:602
2025-08-25 21:42:49,754 | INFO     | image_processing_api | _generate_comprehensive_description_internal:606 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:606
2025-08-25 21:42:49,754 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:612 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:612
2025-08-25 21:42:49,754 | DEBUG    | image_processing_api | encode_image_with_resizing:211 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpk7lw6jzj/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:211
2025-08-25 21:42:49,995 | INFO     | image_processing_api | encode_image_with_resizing:223 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:223
2025-08-25 21:42:50,013 | DEBUG    | image_processing_api | encode_image_with_resizing:232 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:232
2025-08-25 21:42:54,298 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:643 | Additional details found from image 1: - The t-shirt features a small graphic on the front that reads "GENIUS" in a multicolored design, contrasting with the previously mentioned large graphic on the back.
- The fit of the t-shirt is more relaxed and slightly longer than typical t-shirts, allowing for a casual silhouette.
- The shorts from the original description have been replaced with relaxed-fit black trousers that have a smooth, streamlined appearance.
- The footwear is now white casual sneakers with a thicker sole, providing a more sporty | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:643
2025-08-25 21:42:54,799 | INFO     | image_processing_api | _generate_comprehensive_description_internal:662 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:662
2025-08-25 21:42:54,799 | DEBUG    | image_processing_api | api_call_with_retry:247 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:247
2025-08-25 21:42:54,799 | DEBUG    | image_processing_api | clean_description:677 | Cleaning description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:677
2025-08-25 21:42:54,799 | DEBUG    | image_processing_api | clean_description:689 | Cleaned description: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:689
2025-08-25 21:42:54,799 | INFO     | image_processing_api | process_zip_file:780 | Description generated for group_6292393310444: Wearing a black oversized graphic t-shirt featuring a colorful illustration of Rick Sanchez on the b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:780
2025-08-25 21:42:54,799 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:359 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:359
2025-08-25 21:42:54,799 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:366 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:366
2025-08-25 21:42:54,799 | DEBUG    | image_processing_api | process_zip_file:786 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:786
2025-08-25 21:42:54,799 | DEBUG    | image_processing_api | find_matching_prompt:371 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:371
2025-08-25 21:42:54,800 | DEBUG    | image_processing_api | find_matching_prompt:376 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:376
2025-08-25 21:42:54,800 | DEBUG    | image_processing_api | process_zip_file:795 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:795
2025-08-25 21:42:54,800 | DEBUG    | image_processing_api | process_zip_file:803 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:803
2025-08-25 21:42:54,800 | INFO     | image_processing_api | process_zip_file:819 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:819
2025-08-25 21:42:54,800 | INFO     | image_processing_api | process_zip_file:834 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:834
2025-08-25 21:42:54,800 | INFO     | image_processing_api | process_images:902 | Request 0dd7d137: Processing completed in 14.247s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-25 21:42:54,800 | DEBUG    | image_processing_api | process_images:907 | Request 0dd7d137: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:907
2025-08-25 21:42:54,800 | INFO     | image_processing_api | process_images:909 | Request 0dd7d137: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:909
2025-08-25 21:42:54,802 | INFO     | image_processing_api | add_request_id:184 | Request 0dd7d137 completed: 200 in 16.964s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:184
2025-08-26 00:10:02,841 | INFO     | image_processing_api | add_request_id:199 | Request dc17e300 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:199
2025-08-26 00:10:05,162 | INFO     | image_processing_api | process_images:894 | Request dc17e300: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:894
2025-08-26 00:10:05,162 | INFO     | image_processing_api | process_images:902 | Request dc17e300: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-26 00:10:05,164 | DEBUG    | image_processing_api | process_images:908 | Request dc17e300: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:908
2025-08-26 00:10:05,165 | DEBUG    | image_processing_api | process_images:912 | Request dc17e300: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:912
2025-08-26 00:10:05,174 | INFO     | image_processing_api | process_images:917 | Request dc17e300: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:917
2025-08-26 00:10:05,174 | INFO     | image_processing_api | process_zip_file:716 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:716
2025-08-26 00:10:05,174 | DEBUG    | image_processing_api | process_zip_file:720 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:720
2025-08-26 00:10:05,191 | INFO     | image_processing_api | process_zip_file:724 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-26 00:10:05,191 | DEBUG    | image_processing_api | process_zip_file:733 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:733
2025-08-26 00:10:05,191 | DEBUG    | image_processing_api | process_zip_file:734 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:734
2025-08-26 00:10:05,191 | DEBUG    | image_processing_api | process_zip_file:735 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:735
2025-08-26 00:10:05,191 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:10:05,191 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:10:05,191 | DEBUG    | image_processing_api | process_zip_file:743 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:10:05,192 | DEBUG    | image_processing_api | process_zip_file:746 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:746
2025-08-26 00:10:05,192 | DEBUG    | image_processing_api | load_json_file:217 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:217
2025-08-26 00:10:05,194 | DEBUG    | image_processing_api | load_json_file:222 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:222
2025-08-26 00:10:05,194 | INFO     | image_processing_api | process_zip_file:759 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-26 00:10:05,194 | INFO     | image_processing_api | process_zip_file:762 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:762
2025-08-26 00:10:05,194 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:10:05,194 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:10:05,194 | INFO     | image_processing_api | process_zip_file:769 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:10:05,194 | INFO     | image_processing_api | select_all_images_per_folder:471 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:471
2025-08-26 00:10:05,194 | INFO     | image_processing_api | select_all_images_per_folder:472 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:472
2025-08-26 00:10:05,194 | INFO     | image_processing_api | select_all_images_per_folder:473 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:473
2025-08-26 00:10:05,195 | DEBUG    | image_processing_api | select_all_images_per_folder:481 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:481
2025-08-26 00:10:05,195 | DEBUG    | image_processing_api | select_all_images_per_folder:483 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:483
2025-08-26 00:10:05,195 | INFO     | image_processing_api | select_all_images_per_folder:528 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:528
2025-08-26 00:10:05,195 | INFO     | image_processing_api | select_all_images_per_folder:537 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:537
2025-08-26 00:10:05,195 | INFO     | image_processing_api | select_all_images_per_folder:578 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:578
2025-08-26 00:10:05,195 | INFO     | image_processing_api | select_all_images_per_folder:580 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:580
2025-08-26 00:10:05,196 | INFO     | image_processing_api | process_zip_file:776 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:776
2025-08-26 00:10:05,196 | INFO     | image_processing_api | process_zip_file:781 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:781
2025-08-26 00:10:05,196 | DEBUG    | image_processing_api | process_zip_file:787 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:787
2025-08-26 00:10:05,196 | INFO     | image_processing_api | detect_gender_from_image:422 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:422
2025-08-26 00:10:05,196 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:10:05,196 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:10:05,197 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:10:05,417 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:10:05,430 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:10:08,216 | DEBUG    | image_processing_api | _detect_gender_internal:450 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-26 00:10:08,216 | INFO     | image_processing_api | _detect_gender_internal:457 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:457
2025-08-26 00:10:08,216 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:10:08,216 | INFO     | image_processing_api | process_zip_file:790 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:790
2025-08-26 00:10:08,217 | DEBUG    | image_processing_api | process_zip_file:793 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:793
2025-08-26 00:10:08,217 | INFO     | image_processing_api | get_background_suggestions:303 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:303
2025-08-26 00:10:08,217 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:10:08,217 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:10:08,217 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:10:08,482 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:10:08,496 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:10:08,496 | DEBUG    | image_processing_api | _get_background_suggestions_internal:311 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:311
2025-08-26 00:10:08,496 | DEBUG    | image_processing_api | _get_background_suggestions_internal:335 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:335
2025-08-26 00:10:11,217 | DEBUG    | image_processing_api | _get_background_suggestions_internal:349 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:349
2025-08-26 00:10:11,217 | DEBUG    | image_processing_api | _get_background_suggestions_internal:367 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:367
2025-08-26 00:10:11,218 | INFO     | image_processing_api | _get_background_suggestions_internal:370 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:370
2025-08-26 00:10:11,218 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:10:11,218 | INFO     | image_processing_api | process_zip_file:796 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:796
2025-08-26 00:10:11,218 | DEBUG    | image_processing_api | process_zip_file:799 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:799
2025-08-26 00:10:11,218 | INFO     | image_processing_api | generate_comprehensive_folder_description:585 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:585
2025-08-26 00:10:11,218 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:10:11,218 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:10:11,218 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:591 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:591
2025-08-26 00:10:11,218 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:10:11,441 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:10:11,451 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:10:11,452 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:610 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:610
2025-08-26 00:10:13,592 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:624 | Base description generated: Wearing a black oversized t-shirt with a colorful graphic print featuring Rick Sanchez on the back, ... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:624
2025-08-26 00:10:13,592 | INFO     | image_processing_api | _generate_comprehensive_description_internal:628 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:628
2025-08-26 00:10:13,592 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:10:13,592 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpatrfvisr/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:10:13,811 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:10:13,821 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:10:18,142 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 1: - The t-shirt features a smaller graphic on the front with the text "GENIUS" and incorporates bright colors such as red, blue, and white.
- The shorts have been replaced with black relaxed-fit trousers that have a slightly tapered leg.
- The footwear consists of light-colored sneakers with a white base and black accents, contrasting with the outfit. 
- The t-shirt appears to have a more structured fit with slightly longer sleeves compared to the initially described oversized style. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 00:10:18,647 | INFO     | image_processing_api | _generate_comprehensive_description_internal:684 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:684
2025-08-26 00:10:18,648 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:10:18,648 | DEBUG    | image_processing_api | clean_description:699 | Cleaning description: Wearing a black oversized t-shirt with a colorful graphic print featuring Rick Sanchez on the back, ... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:699
2025-08-26 00:10:18,649 | DEBUG    | image_processing_api | clean_description:711 | Cleaned description: Wearing a black oversized t-shirt with a colorful graphic print featuring Rick Sanchez on the back, ... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-26 00:10:18,649 | INFO     | image_processing_api | process_zip_file:802 | Description generated for group_6292393310444: Wearing a black oversized t-shirt with a colorful graphic print featuring Rick Sanchez on the back, ... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:802
2025-08-26 00:10:18,649 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:381 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:381
2025-08-26 00:10:18,649 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:388 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:388
2025-08-26 00:10:18,649 | DEBUG    | image_processing_api | process_zip_file:808 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:808
2025-08-26 00:10:18,649 | DEBUG    | image_processing_api | find_matching_prompt:393 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:393
2025-08-26 00:10:18,649 | DEBUG    | image_processing_api | find_matching_prompt:398 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:398
2025-08-26 00:10:18,649 | DEBUG    | image_processing_api | process_zip_file:817 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:817
2025-08-26 00:10:18,650 | DEBUG    | image_processing_api | process_zip_file:825 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:825
2025-08-26 00:10:18,653 | INFO     | image_processing_api | process_zip_file:841 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:841
2025-08-26 00:10:18,653 | INFO     | image_processing_api | process_zip_file:856 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:856
2025-08-26 00:10:18,654 | INFO     | image_processing_api | process_images:924 | Request dc17e300: Processing completed in 13.479s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:924
2025-08-26 00:10:18,657 | DEBUG    | image_processing_api | process_images:929 | Request dc17e300: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:929
2025-08-26 00:10:18,658 | INFO     | image_processing_api | process_images:931 | Request dc17e300: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:931
2025-08-26 00:10:18,665 | INFO     | image_processing_api | add_request_id:206 | Request dc17e300 completed: 200 in 15.825s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:206
2025-08-26 00:21:35,918 | INFO     | image_processing_api | add_request_id:199 | Request 3b32dffa started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:199
2025-08-26 00:21:38,054 | INFO     | image_processing_api | process_images:894 | Request 3b32dffa: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:894
2025-08-26 00:21:38,055 | INFO     | image_processing_api | process_images:902 | Request 3b32dffa: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-26 00:21:38,057 | DEBUG    | image_processing_api | process_images:908 | Request 3b32dffa: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:908
2025-08-26 00:21:38,057 | DEBUG    | image_processing_api | process_images:912 | Request 3b32dffa: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:912
2025-08-26 00:21:38,063 | INFO     | image_processing_api | process_images:917 | Request 3b32dffa: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:917
2025-08-26 00:21:38,064 | INFO     | image_processing_api | process_zip_file:716 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:716
2025-08-26 00:21:38,064 | DEBUG    | image_processing_api | process_zip_file:720 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:720
2025-08-26 00:21:38,071 | INFO     | image_processing_api | process_zip_file:724 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-26 00:21:38,071 | DEBUG    | image_processing_api | process_zip_file:733 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:733
2025-08-26 00:21:38,071 | DEBUG    | image_processing_api | process_zip_file:734 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:734
2025-08-26 00:21:38,071 | DEBUG    | image_processing_api | process_zip_file:735 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:735
2025-08-26 00:21:38,071 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:21:38,071 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:21:38,071 | DEBUG    | image_processing_api | process_zip_file:743 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:21:38,071 | DEBUG    | image_processing_api | process_zip_file:746 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:746
2025-08-26 00:21:38,072 | DEBUG    | image_processing_api | load_json_file:217 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:217
2025-08-26 00:21:38,075 | DEBUG    | image_processing_api | load_json_file:222 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:222
2025-08-26 00:21:38,075 | INFO     | image_processing_api | process_zip_file:759 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-26 00:21:38,075 | INFO     | image_processing_api | process_zip_file:762 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:762
2025-08-26 00:21:38,075 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:21:38,076 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:21:38,076 | INFO     | image_processing_api | process_zip_file:769 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:21:38,076 | INFO     | image_processing_api | select_all_images_per_folder:471 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:471
2025-08-26 00:21:38,076 | INFO     | image_processing_api | select_all_images_per_folder:472 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:472
2025-08-26 00:21:38,076 | INFO     | image_processing_api | select_all_images_per_folder:473 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:473
2025-08-26 00:21:38,076 | DEBUG    | image_processing_api | select_all_images_per_folder:481 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:481
2025-08-26 00:21:38,076 | DEBUG    | image_processing_api | select_all_images_per_folder:483 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:483
2025-08-26 00:21:38,076 | INFO     | image_processing_api | select_all_images_per_folder:528 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:528
2025-08-26 00:21:38,076 | INFO     | image_processing_api | select_all_images_per_folder:537 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:537
2025-08-26 00:21:38,076 | INFO     | image_processing_api | select_all_images_per_folder:578 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:578
2025-08-26 00:21:38,076 | INFO     | image_processing_api | select_all_images_per_folder:580 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:580
2025-08-26 00:21:38,076 | INFO     | image_processing_api | process_zip_file:776 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:776
2025-08-26 00:21:38,076 | INFO     | image_processing_api | process_zip_file:781 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:781
2025-08-26 00:21:38,077 | DEBUG    | image_processing_api | process_zip_file:787 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:787
2025-08-26 00:21:38,077 | INFO     | image_processing_api | detect_gender_from_image:422 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:422
2025-08-26 00:21:38,077 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:21:38,077 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:21:38,078 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:21:38,299 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:21:38,310 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:21:40,668 | DEBUG    | image_processing_api | _detect_gender_internal:450 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-26 00:21:40,669 | INFO     | image_processing_api | _detect_gender_internal:457 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:457
2025-08-26 00:21:40,669 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:21:40,669 | INFO     | image_processing_api | process_zip_file:790 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:790
2025-08-26 00:21:40,669 | DEBUG    | image_processing_api | process_zip_file:793 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:793
2025-08-26 00:21:40,669 | INFO     | image_processing_api | get_background_suggestions:303 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:303
2025-08-26 00:21:40,670 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:21:40,670 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:21:40,670 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:21:40,895 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:21:40,906 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:21:40,906 | DEBUG    | image_processing_api | _get_background_suggestions_internal:311 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:311
2025-08-26 00:21:40,906 | DEBUG    | image_processing_api | _get_background_suggestions_internal:335 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:335
2025-08-26 00:21:42,544 | DEBUG    | image_processing_api | _get_background_suggestions_internal:349 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:349
2025-08-26 00:21:42,545 | DEBUG    | image_processing_api | _get_background_suggestions_internal:367 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:367
2025-08-26 00:21:42,545 | INFO     | image_processing_api | _get_background_suggestions_internal:370 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:370
2025-08-26 00:21:42,545 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:21:42,546 | INFO     | image_processing_api | process_zip_file:796 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:796
2025-08-26 00:21:42,546 | DEBUG    | image_processing_api | process_zip_file:799 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:799
2025-08-26 00:21:42,546 | INFO     | image_processing_api | generate_comprehensive_folder_description:585 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:585
2025-08-26 00:21:42,546 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:21:42,546 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:21:42,546 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:591 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:591
2025-08-26 00:21:42,546 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:21:42,777 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:21:42,787 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:21:42,788 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:610 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:610
2025-08-26 00:21:44,935 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:624 | Base description generated: Wearing a black oversized t-shirt featuring a colorful graphic print of Rick Sanchez on the back wit... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:624
2025-08-26 00:21:44,935 | INFO     | image_processing_api | _generate_comprehensive_description_internal:628 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:628
2025-08-26 00:21:44,935 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:21:44,935 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpocu6nlji/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:21:45,166 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:21:45,176 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:21:47,187 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 1: - The t-shirt features a smaller graphic on the front that includes the word "GENIUS" in colorful lettering.
- The shorts have been replaced with black, relaxed-fit pants.
- The footwear is white with a possibly textured or rubber sole, clearly visible in the image. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 00:21:47,693 | INFO     | image_processing_api | _generate_comprehensive_description_internal:684 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:684
2025-08-26 00:21:47,694 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:21:47,694 | DEBUG    | image_processing_api | clean_description:699 | Cleaning description: Wearing a black oversized t-shirt featuring a colorful graphic print of Rick Sanchez on the back wit... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:699
2025-08-26 00:21:47,694 | DEBUG    | image_processing_api | clean_description:711 | Cleaned description: Wearing a black oversized t-shirt featuring a colorful graphic print of Rick Sanchez on the back wit... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-26 00:21:47,694 | INFO     | image_processing_api | process_zip_file:802 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a colorful graphic print of Rick Sanchez on the back wit... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:802
2025-08-26 00:21:47,694 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:381 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:381
2025-08-26 00:21:47,695 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:388 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:388
2025-08-26 00:21:47,695 | DEBUG    | image_processing_api | process_zip_file:808 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:808
2025-08-26 00:21:47,695 | DEBUG    | image_processing_api | find_matching_prompt:393 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:393
2025-08-26 00:21:47,695 | DEBUG    | image_processing_api | find_matching_prompt:398 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:398
2025-08-26 00:21:47,695 | DEBUG    | image_processing_api | process_zip_file:817 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:817
2025-08-26 00:21:47,695 | DEBUG    | image_processing_api | process_zip_file:825 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:825
2025-08-26 00:21:47,696 | INFO     | image_processing_api | process_zip_file:841 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:841
2025-08-26 00:21:47,696 | INFO     | image_processing_api | process_zip_file:856 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:856
2025-08-26 00:21:47,696 | INFO     | image_processing_api | process_images:924 | Request 3b32dffa: Processing completed in 9.633s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:924
2025-08-26 00:21:47,697 | DEBUG    | image_processing_api | process_images:929 | Request 3b32dffa: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:929
2025-08-26 00:21:47,697 | INFO     | image_processing_api | process_images:931 | Request 3b32dffa: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:931
2025-08-26 00:21:47,704 | INFO     | image_processing_api | add_request_id:206 | Request 3b32dffa completed: 200 in 11.787s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:206
2025-08-26 00:47:58,767 | INFO     | image_processing_api | add_request_id:199 | Request 3e6ccf75 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:199
2025-08-26 00:48:01,121 | INFO     | image_processing_api | process_images:894 | Request 3e6ccf75: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:894
2025-08-26 00:48:01,121 | INFO     | image_processing_api | process_images:902 | Request 3e6ccf75: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-26 00:48:01,124 | DEBUG    | image_processing_api | process_images:908 | Request 3e6ccf75: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:908
2025-08-26 00:48:01,124 | DEBUG    | image_processing_api | process_images:912 | Request 3e6ccf75: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:912
2025-08-26 00:48:01,136 | INFO     | image_processing_api | process_images:917 | Request 3e6ccf75: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:917
2025-08-26 00:48:01,136 | INFO     | image_processing_api | process_zip_file:716 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:716
2025-08-26 00:48:01,136 | DEBUG    | image_processing_api | process_zip_file:720 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:720
2025-08-26 00:48:01,149 | INFO     | image_processing_api | process_zip_file:724 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-26 00:48:01,149 | DEBUG    | image_processing_api | process_zip_file:733 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:733
2025-08-26 00:48:01,149 | DEBUG    | image_processing_api | process_zip_file:734 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:734
2025-08-26 00:48:01,149 | DEBUG    | image_processing_api | process_zip_file:735 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:735
2025-08-26 00:48:01,149 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:48:01,149 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:48:01,149 | DEBUG    | image_processing_api | process_zip_file:743 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:48:01,149 | DEBUG    | image_processing_api | process_zip_file:746 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:746
2025-08-26 00:48:01,150 | DEBUG    | image_processing_api | load_json_file:217 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:217
2025-08-26 00:48:01,154 | DEBUG    | image_processing_api | load_json_file:222 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:222
2025-08-26 00:48:01,155 | INFO     | image_processing_api | process_zip_file:759 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-26 00:48:01,155 | INFO     | image_processing_api | process_zip_file:762 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:762
2025-08-26 00:48:01,155 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:48:01,155 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:48:01,155 | INFO     | image_processing_api | process_zip_file:769 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:48:01,155 | INFO     | image_processing_api | select_all_images_per_folder:471 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:471
2025-08-26 00:48:01,155 | INFO     | image_processing_api | select_all_images_per_folder:472 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:472
2025-08-26 00:48:01,155 | INFO     | image_processing_api | select_all_images_per_folder:473 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:473
2025-08-26 00:48:01,155 | DEBUG    | image_processing_api | select_all_images_per_folder:481 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:481
2025-08-26 00:48:01,155 | DEBUG    | image_processing_api | select_all_images_per_folder:483 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:483
2025-08-26 00:48:01,155 | INFO     | image_processing_api | select_all_images_per_folder:528 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:528
2025-08-26 00:48:01,156 | INFO     | image_processing_api | select_all_images_per_folder:537 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:537
2025-08-26 00:48:01,156 | INFO     | image_processing_api | select_all_images_per_folder:578 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:578
2025-08-26 00:48:01,156 | INFO     | image_processing_api | select_all_images_per_folder:580 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:580
2025-08-26 00:48:01,156 | INFO     | image_processing_api | process_zip_file:776 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:776
2025-08-26 00:48:01,156 | INFO     | image_processing_api | process_zip_file:781 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:781
2025-08-26 00:48:01,156 | DEBUG    | image_processing_api | process_zip_file:787 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:787
2025-08-26 00:48:01,156 | INFO     | image_processing_api | detect_gender_from_image:422 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:422
2025-08-26 00:48:01,156 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:48:01,156 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:48:01,156 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:48:01,371 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:48:01,382 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:48:03,025 | DEBUG    | image_processing_api | _detect_gender_internal:450 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-26 00:48:03,025 | INFO     | image_processing_api | _detect_gender_internal:457 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:457
2025-08-26 00:48:03,025 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:48:03,025 | INFO     | image_processing_api | process_zip_file:790 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:790
2025-08-26 00:48:03,025 | DEBUG    | image_processing_api | process_zip_file:793 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:793
2025-08-26 00:48:03,025 | INFO     | image_processing_api | get_background_suggestions:303 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:303
2025-08-26 00:48:03,026 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:48:03,026 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:48:03,026 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:48:03,246 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:48:03,258 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:48:03,259 | DEBUG    | image_processing_api | _get_background_suggestions_internal:311 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:311
2025-08-26 00:48:03,259 | DEBUG    | image_processing_api | _get_background_suggestions_internal:335 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:335
2025-08-26 00:48:04,693 | DEBUG    | image_processing_api | _get_background_suggestions_internal:349 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:349
2025-08-26 00:48:04,693 | DEBUG    | image_processing_api | _get_background_suggestions_internal:367 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:367
2025-08-26 00:48:04,693 | INFO     | image_processing_api | _get_background_suggestions_internal:370 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:370
2025-08-26 00:48:04,693 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:48:04,694 | INFO     | image_processing_api | process_zip_file:796 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:796
2025-08-26 00:48:04,694 | DEBUG    | image_processing_api | process_zip_file:799 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:799
2025-08-26 00:48:04,694 | INFO     | image_processing_api | generate_comprehensive_folder_description:585 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:585
2025-08-26 00:48:04,694 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:48:04,694 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:48:04,694 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:591 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:591
2025-08-26 00:48:04,694 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:48:04,925 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:48:04,935 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:48:04,935 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:610 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:610
2025-08-26 00:48:06,493 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:624 | Base description generated: Wearing a black oversized t-shirt with a vibrant graphic print featuring Rick Sanchez, paired with b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:624
2025-08-26 00:48:06,494 | INFO     | image_processing_api | _generate_comprehensive_description_internal:628 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:628
2025-08-26 00:48:06,494 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:48:06,494 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmptocah1ld/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:48:06,719 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:48:06,729 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:48:10,901 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 1: - The graphic print on the t-shirt is now described as featuring the word "GENIUS" in a bold, colorful style, rather than a depiction of Rick Sanchez.
- The trousers appear to have a more tailored fit, with a slightly tapered leg.
- The footwear is identified as white sneakers with a slightly chunky sole, contrasting with the overall dark color palette of the outfit. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 00:48:11,405 | INFO     | image_processing_api | _generate_comprehensive_description_internal:684 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:684
2025-08-26 00:48:11,406 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:48:11,406 | DEBUG    | image_processing_api | clean_description:699 | Cleaning description: Wearing a black oversized t-shirt with a vibrant graphic print featuring Rick Sanchez, paired with b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:699
2025-08-26 00:48:11,406 | DEBUG    | image_processing_api | clean_description:711 | Cleaned description: Wearing a black oversized t-shirt with a vibrant graphic print featuring Rick Sanchez, paired with b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-26 00:48:11,406 | INFO     | image_processing_api | process_zip_file:802 | Description generated for group_6292393310444: Wearing a black oversized t-shirt with a vibrant graphic print featuring Rick Sanchez, paired with b... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:802
2025-08-26 00:48:11,406 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:381 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:381
2025-08-26 00:48:11,407 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:388 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:388
2025-08-26 00:48:11,407 | DEBUG    | image_processing_api | process_zip_file:808 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:808
2025-08-26 00:48:11,407 | DEBUG    | image_processing_api | find_matching_prompt:393 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:393
2025-08-26 00:48:11,407 | DEBUG    | image_processing_api | find_matching_prompt:398 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:398
2025-08-26 00:48:11,407 | DEBUG    | image_processing_api | process_zip_file:817 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:817
2025-08-26 00:48:11,407 | DEBUG    | image_processing_api | process_zip_file:825 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:825
2025-08-26 00:48:11,407 | INFO     | image_processing_api | process_zip_file:841 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:841
2025-08-26 00:48:11,407 | INFO     | image_processing_api | process_zip_file:856 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:856
2025-08-26 00:48:11,408 | INFO     | image_processing_api | process_images:924 | Request 3e6ccf75: Processing completed in 10.272s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:924
2025-08-26 00:48:11,409 | DEBUG    | image_processing_api | process_images:929 | Request 3e6ccf75: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:929
2025-08-26 00:48:11,409 | INFO     | image_processing_api | process_images:931 | Request 3e6ccf75: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:931
2025-08-26 00:48:11,422 | INFO     | image_processing_api | add_request_id:206 | Request 3e6ccf75 completed: 200 in 12.656s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:206
2025-08-26 00:53:28,241 | INFO     | image_processing_api | add_request_id:199 | Request 25a0b604 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:199
2025-08-26 00:53:30,822 | INFO     | image_processing_api | process_images:894 | Request 25a0b604: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:894
2025-08-26 00:53:30,822 | INFO     | image_processing_api | process_images:902 | Request 25a0b604: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-26 00:53:30,824 | DEBUG    | image_processing_api | process_images:908 | Request 25a0b604: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:908
2025-08-26 00:53:30,824 | DEBUG    | image_processing_api | process_images:912 | Request 25a0b604: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:912
2025-08-26 00:53:30,836 | INFO     | image_processing_api | process_images:917 | Request 25a0b604: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:917
2025-08-26 00:53:30,838 | INFO     | image_processing_api | process_zip_file:716 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:716
2025-08-26 00:53:30,838 | DEBUG    | image_processing_api | process_zip_file:720 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:720
2025-08-26 00:53:30,854 | INFO     | image_processing_api | process_zip_file:724 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-26 00:53:30,854 | DEBUG    | image_processing_api | process_zip_file:733 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:733
2025-08-26 00:53:30,854 | DEBUG    | image_processing_api | process_zip_file:734 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:734
2025-08-26 00:53:30,854 | DEBUG    | image_processing_api | process_zip_file:735 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:735
2025-08-26 00:53:30,854 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:53:30,854 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:53:30,854 | DEBUG    | image_processing_api | process_zip_file:743 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:53:30,854 | DEBUG    | image_processing_api | process_zip_file:746 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:746
2025-08-26 00:53:30,854 | DEBUG    | image_processing_api | load_json_file:217 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:217
2025-08-26 00:53:30,858 | DEBUG    | image_processing_api | load_json_file:222 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:222
2025-08-26 00:53:30,858 | INFO     | image_processing_api | process_zip_file:759 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-26 00:53:30,858 | INFO     | image_processing_api | process_zip_file:762 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:762
2025-08-26 00:53:30,859 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:53:30,859 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:53:30,860 | INFO     | image_processing_api | process_zip_file:769 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:53:30,861 | INFO     | image_processing_api | select_all_images_per_folder:471 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:471
2025-08-26 00:53:30,861 | INFO     | image_processing_api | select_all_images_per_folder:472 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:472
2025-08-26 00:53:30,862 | INFO     | image_processing_api | select_all_images_per_folder:473 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:473
2025-08-26 00:53:30,862 | DEBUG    | image_processing_api | select_all_images_per_folder:481 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:481
2025-08-26 00:53:30,863 | DEBUG    | image_processing_api | select_all_images_per_folder:483 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:483
2025-08-26 00:53:30,863 | INFO     | image_processing_api | select_all_images_per_folder:528 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:528
2025-08-26 00:53:30,864 | INFO     | image_processing_api | select_all_images_per_folder:537 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:537
2025-08-26 00:53:30,864 | INFO     | image_processing_api | select_all_images_per_folder:578 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:578
2025-08-26 00:53:30,864 | INFO     | image_processing_api | select_all_images_per_folder:580 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:580
2025-08-26 00:53:30,864 | INFO     | image_processing_api | process_zip_file:776 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:776
2025-08-26 00:53:30,864 | INFO     | image_processing_api | process_zip_file:781 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:781
2025-08-26 00:53:30,864 | DEBUG    | image_processing_api | process_zip_file:787 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:787
2025-08-26 00:53:30,864 | INFO     | image_processing_api | detect_gender_from_image:422 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:422
2025-08-26 00:53:30,864 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:53:30,864 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:53:30,864 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:53:31,080 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:53:31,092 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:53:33,367 | DEBUG    | image_processing_api | _detect_gender_internal:450 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-26 00:53:33,368 | INFO     | image_processing_api | _detect_gender_internal:457 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:457
2025-08-26 00:53:33,368 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:53:33,368 | INFO     | image_processing_api | process_zip_file:790 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:790
2025-08-26 00:53:33,368 | DEBUG    | image_processing_api | process_zip_file:793 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:793
2025-08-26 00:53:33,368 | INFO     | image_processing_api | get_background_suggestions:303 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:303
2025-08-26 00:53:33,369 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:53:33,369 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:53:33,369 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:53:33,602 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:53:33,614 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:53:33,614 | DEBUG    | image_processing_api | _get_background_suggestions_internal:311 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:311
2025-08-26 00:53:33,614 | DEBUG    | image_processing_api | _get_background_suggestions_internal:335 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:335
2025-08-26 00:53:36,160 | DEBUG    | image_processing_api | _get_background_suggestions_internal:349 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:349
2025-08-26 00:53:36,161 | DEBUG    | image_processing_api | _get_background_suggestions_internal:367 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:367
2025-08-26 00:53:36,161 | INFO     | image_processing_api | _get_background_suggestions_internal:370 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:370
2025-08-26 00:53:36,161 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:53:36,161 | INFO     | image_processing_api | process_zip_file:796 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:796
2025-08-26 00:53:36,161 | DEBUG    | image_processing_api | process_zip_file:799 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:799
2025-08-26 00:53:36,161 | INFO     | image_processing_api | generate_comprehensive_folder_description:585 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:585
2025-08-26 00:53:36,162 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:53:36,162 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:53:36,162 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:591 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:591
2025-08-26 00:53:36,162 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:53:36,390 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:53:36,401 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:53:36,402 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:610 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:610
2025-08-26 00:53:42,491 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:624 | Base description generated: Wearing a black oversized t-shirt featuring a graphic design of Rick Sanchez from the animated serie... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:624
2025-08-26 00:53:42,492 | INFO     | image_processing_api | _generate_comprehensive_description_internal:628 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:628
2025-08-26 00:53:42,492 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:53:42,492 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp79dq1v_d/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:53:42,713 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:53:42,723 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:53:44,849 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 1: - The t-shirt features a small graphic with the word "GENIUS" in red, blue, and white colors on the front.
- The shorts have been replaced with relaxed-fit black pants, which appear to be slightly tapered at the ankles.
- The footwear is now revealed to be white sneakers with a chunky sole and black detailing near the bottom. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 00:53:45,351 | INFO     | image_processing_api | _generate_comprehensive_description_internal:684 | Enhanced description created with 1 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:684
2025-08-26 00:53:45,351 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:53:45,351 | DEBUG    | image_processing_api | clean_description:699 | Cleaning description: Wearing a black oversized t-shirt featuring a graphic design of Rick Sanchez from the animated serie... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:699
2025-08-26 00:53:45,351 | DEBUG    | image_processing_api | clean_description:711 | Cleaned description: Wearing a black oversized t-shirt featuring a graphic design of Rick Sanchez from the animated serie... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-26 00:53:45,351 | INFO     | image_processing_api | process_zip_file:802 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a graphic design of Rick Sanchez from the animated serie... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:802
2025-08-26 00:53:45,352 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:381 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:381
2025-08-26 00:53:45,352 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:388 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:388
2025-08-26 00:53:45,352 | DEBUG    | image_processing_api | process_zip_file:808 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:808
2025-08-26 00:53:45,352 | DEBUG    | image_processing_api | find_matching_prompt:393 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:393
2025-08-26 00:53:45,352 | DEBUG    | image_processing_api | find_matching_prompt:398 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:398
2025-08-26 00:53:45,352 | DEBUG    | image_processing_api | process_zip_file:817 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:817
2025-08-26 00:53:45,352 | DEBUG    | image_processing_api | process_zip_file:825 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:825
2025-08-26 00:53:45,352 | INFO     | image_processing_api | process_zip_file:841 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:841
2025-08-26 00:53:45,352 | INFO     | image_processing_api | process_zip_file:856 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:856
2025-08-26 00:53:45,353 | INFO     | image_processing_api | process_images:924 | Request 25a0b604: Processing completed in 14.515s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:924
2025-08-26 00:53:45,353 | DEBUG    | image_processing_api | process_images:929 | Request 25a0b604: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:929
2025-08-26 00:53:45,353 | INFO     | image_processing_api | process_images:931 | Request 25a0b604: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:931
2025-08-26 00:53:45,360 | INFO     | image_processing_api | add_request_id:206 | Request 25a0b604 completed: 200 in 17.120s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:206
2025-08-26 00:59:22,632 | INFO     | image_processing_api | add_request_id:199 | Request 1bb827ce started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:199
2025-08-26 00:59:30,905 | INFO     | image_processing_api | process_images:894 | Request 1bb827ce: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:894
2025-08-26 00:59:30,906 | INFO     | image_processing_api | process_images:902 | Request 1bb827ce: File size: 52320743 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-26 00:59:30,908 | DEBUG    | image_processing_api | process_images:908 | Request 1bb827ce: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:908
2025-08-26 00:59:30,908 | DEBUG    | image_processing_api | process_images:912 | Request 1bb827ce: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:912
2025-08-26 00:59:30,982 | INFO     | image_processing_api | process_images:917 | Request 1bb827ce: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:917
2025-08-26 00:59:30,982 | INFO     | image_processing_api | process_zip_file:716 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:716
2025-08-26 00:59:30,982 | DEBUG    | image_processing_api | process_zip_file:720 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:720
2025-08-26 00:59:31,030 | INFO     | image_processing_api | process_zip_file:724 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:733 | Extracted 8 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:733
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:734 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:734
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:735 | Directory structure: ['6292393960984_0002.jpg', '6292393960984_0003.jpg', '6292393960984_0001.jpg', '6292393960984_0004.jpg', '6292393960984_0005.jpg', '6292393960984_0007.jpg', '6292393960984_0006.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:735
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0007.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:743 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | process_zip_file:746 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:746
2025-08-26 00:59:31,031 | DEBUG    | image_processing_api | load_json_file:217 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:217
2025-08-26 00:59:31,034 | DEBUG    | image_processing_api | load_json_file:222 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:222
2025-08-26 00:59:31,034 | INFO     | image_processing_api | process_zip_file:759 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-26 00:59:31,035 | INFO     | image_processing_api | process_zip_file:762 | Temp directory contents: ['6292393960984_0002.jpg', '6292393960984_0003.jpg', '6292393960984_0001.jpg', '6292393960984_0004.jpg', '6292393960984_0005.jpg', '6292393960984_0007.jpg', '6292393960984_0006.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:762
2025-08-26 00:59:31,035 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:59:31,035 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:59:31,035 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:59:31,035 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:59:31,035 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:59:31,035 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0007.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:59:31,035 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:59:31,035 | INFO     | image_processing_api | process_zip_file:769 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 00:59:31,035 | INFO     | image_processing_api | select_all_images_per_folder:471 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:471
2025-08-26 00:59:31,035 | INFO     | image_processing_api | select_all_images_per_folder:472 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:472
2025-08-26 00:59:31,035 | INFO     | image_processing_api | select_all_images_per_folder:473 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:473
2025-08-26 00:59:31,035 | DEBUG    | image_processing_api | select_all_images_per_folder:481 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:481
2025-08-26 00:59:31,035 | DEBUG    | image_processing_api | select_all_images_per_folder:483 | Items in base folder: ['6292393960984_0002.jpg', '6292393960984_0003.jpg', '6292393960984_0001.jpg', '6292393960984_0004.jpg', '6292393960984_0005.jpg', '6292393960984_0007.jpg', '6292393960984_0006.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:483
2025-08-26 00:59:31,035 | INFO     | image_processing_api | select_all_images_per_folder:528 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:528
2025-08-26 00:59:31,035 | INFO     | image_processing_api | select_all_images_per_folder:537 | Found 7 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:537
2025-08-26 00:59:31,035 | INFO     | image_processing_api | select_all_images_per_folder:578 | Created folder group_6292393960984: 7 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:578
2025-08-26 00:59:31,036 | INFO     | image_processing_api | select_all_images_per_folder:580 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:580
2025-08-26 00:59:31,036 | INFO     | image_processing_api | process_zip_file:776 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:776
2025-08-26 00:59:31,036 | INFO     | image_processing_api | process_zip_file:781 | Processing folder: group_6292393960984 with 7 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:781
2025-08-26 00:59:31,036 | DEBUG    | image_processing_api | process_zip_file:787 | Detecting gender for folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:787
2025-08-26 00:59:31,036 | INFO     | image_processing_api | detect_gender_from_image:422 | Detecting gender from image: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:422
2025-08-26 00:59:31,036 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:59:31,036 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:59:31,036 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:59:31,241 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:59:31,254 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:59:32,643 | DEBUG    | image_processing_api | _detect_gender_internal:450 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-26 00:59:32,643 | INFO     | image_processing_api | _detect_gender_internal:457 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:457
2025-08-26 00:59:32,643 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:59:32,643 | INFO     | image_processing_api | process_zip_file:790 | Gender detected for group_6292393960984: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:790
2025-08-26 00:59:32,643 | DEBUG    | image_processing_api | process_zip_file:793 | Getting background suggestion for folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:793
2025-08-26 00:59:32,643 | INFO     | image_processing_api | get_background_suggestions:303 | Getting background suggestions for image: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:303
2025-08-26 00:59:32,643 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:59:32,643 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:59:32,643 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:59:32,871 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:59:32,882 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:59:32,882 | DEBUG    | image_processing_api | _get_background_suggestions_internal:311 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:311
2025-08-26 00:59:32,883 | DEBUG    | image_processing_api | _get_background_suggestions_internal:335 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:335
2025-08-26 00:59:34,818 | DEBUG    | image_processing_api | _get_background_suggestions_internal:349 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:349
2025-08-26 00:59:34,818 | DEBUG    | image_processing_api | _get_background_suggestions_internal:367 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:367
2025-08-26 00:59:34,818 | INFO     | image_processing_api | _get_background_suggestions_internal:370 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:370
2025-08-26 00:59:34,818 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 00:59:34,819 | INFO     | image_processing_api | process_zip_file:796 | Background suggestion for group_6292393960984: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:796
2025-08-26 00:59:34,819 | DEBUG    | image_processing_api | process_zip_file:799 | Generating comprehensive description for folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:799
2025-08-26 00:59:34,819 | INFO     | image_processing_api | generate_comprehensive_folder_description:585 | Generating comprehensive description for folder with 7 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:585
2025-08-26 00:59:34,819 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 00:59:34,819 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 00:59:34,819 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:591 | Analyzing first image: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:591
2025-08-26 00:59:34,819 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:59:35,061 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:59:35,072 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:59:35,072 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:610 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:610
2025-08-26 00:59:38,970 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:624 | Base description generated: Wearing a mustard yellow fitted polo shirt with a classic collar and two-button placket, paired with... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:624
2025-08-26 00:59:38,971 | INFO     | image_processing_api | _generate_comprehensive_description_internal:628 | Analyzing 6 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:628
2025-08-26 00:59:38,971 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 1: 6292393960984_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:59:38,971 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/6292393960984_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:59:39,204 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:59:39,215 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:59:42,025 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 1: - The polo shirt features a solid mustard yellow color with a subtle texture.
- The fit of the polo shirt appears relaxed, enhancing comfort.
- The high-waisted straight-leg jeans have a slightly looser fit through the legs compared to the initial description.
- The jeans feature a classic five-pocket design.
- The sneakers are white and visible, showing a clean, casual style. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 00:59:42,527 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 2: 6292393960984_0003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:59:42,527 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/6292393960984_0003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:59:42,917 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0003.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:59:42,930 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0003.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:59:45,570 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:667 | No additional details from image 2 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:667
2025-08-26 00:59:46,075 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 3: 6292393960984_0004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:59:46,076 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/6292393960984_0004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:59:46,316 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0004.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:59:46,328 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0004.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:59:50,123 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:667 | No additional details from image 3 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:667
2025-08-26 00:59:50,629 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 4: 6292393960984_0005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:59:50,630 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/6292393960984_0005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:59:50,891 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0005.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:59:50,905 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0005.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:59:53,315 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 4: - The polo shirt has a textured fabric, suggesting a ribbed or pique style.
- The fit appears slightly relaxed around the shoulders and chest, contributing to a comfortable but tailored look.
- The buttons on the placket are a lighter shade, possibly a cream or pale beige, providing a contrast against the mustard yellow. 
- The collar is structured, maintaining its shape well. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 00:59:53,818 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 5: 6292393960984_0006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:59:53,818 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/6292393960984_0006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:59:54,083 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0006.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:59:54,099 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0006.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 00:59:57,974 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 5: - The mustard yellow polo shirt features a textured fabric, suggesting a pique weave.
- The collar and placket are well-structured, indicating a tailored fit.
- The buttons on the polo shirt are in a matching yellow tone. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 00:59:58,480 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 6: 6292393960984_0007.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 00:59:58,481 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp5o56n8fw/6292393960984_0007.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 00:59:58,702 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0007.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 00:59:58,713 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0007.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:00:00,936 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:667 | No additional details from image 6 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:667
2025-08-26 01:00:01,439 | INFO     | image_processing_api | _generate_comprehensive_description_internal:684 | Enhanced description created with 3 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:684
2025-08-26 01:00:01,440 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:00:01,441 | DEBUG    | image_processing_api | clean_description:699 | Cleaning description: Wearing a mustard yellow fitted polo shirt with a classic collar and two-button placket, paired with... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:699
2025-08-26 01:00:01,441 | DEBUG    | image_processing_api | clean_description:711 | Cleaned description: Wearing a mustard yellow fitted polo shirt with a classic collar and two-button placket, paired with... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-26 01:00:01,441 | INFO     | image_processing_api | process_zip_file:802 | Description generated for group_6292393960984: Wearing a mustard yellow fitted polo shirt with a classic collar and two-button placket, paired with... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:802
2025-08-26 01:00:01,442 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:381 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:381
2025-08-26 01:00:01,442 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:388 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:388
2025-08-26 01:00:01,442 | DEBUG    | image_processing_api | process_zip_file:808 | Finding matching prompt for folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:808
2025-08-26 01:00:01,442 | DEBUG    | image_processing_api | find_matching_prompt:393 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:393
2025-08-26 01:00:01,442 | DEBUG    | image_processing_api | find_matching_prompt:398 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:398
2025-08-26 01:00:01,442 | DEBUG    | image_processing_api | process_zip_file:817 | Prompt found for group_6292393960984: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:817
2025-08-26 01:00:01,442 | DEBUG    | image_processing_api | process_zip_file:825 | Final prompt text generated for group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:825
2025-08-26 01:00:01,442 | INFO     | image_processing_api | process_zip_file:841 | Successfully processed folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:841
2025-08-26 01:00:01,443 | INFO     | image_processing_api | process_zip_file:856 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:856
2025-08-26 01:00:01,443 | INFO     | image_processing_api | process_images:924 | Request 1bb827ce: Processing completed in 30.461s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:924
2025-08-26 01:00:01,444 | DEBUG    | image_processing_api | process_images:929 | Request 1bb827ce: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:929
2025-08-26 01:00:01,444 | INFO     | image_processing_api | process_images:931 | Request 1bb827ce: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:931
2025-08-26 01:00:01,455 | INFO     | image_processing_api | add_request_id:206 | Request 1bb827ce completed: 200 in 38.825s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:206
2025-08-26 01:20:45,431 | INFO     | image_processing_api | add_request_id:199 | Request 97d608bd started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:199
2025-08-26 01:20:47,831 | INFO     | image_processing_api | process_images:894 | Request 97d608bd: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:894
2025-08-26 01:20:47,831 | INFO     | image_processing_api | process_images:902 | Request 97d608bd: File size: 9553151 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-26 01:20:47,834 | DEBUG    | image_processing_api | process_images:908 | Request 97d608bd: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:908
2025-08-26 01:20:47,834 | DEBUG    | image_processing_api | process_images:912 | Request 97d608bd: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:912
2025-08-26 01:20:47,837 | INFO     | image_processing_api | process_images:917 | Request 97d608bd: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:917
2025-08-26 01:20:47,837 | INFO     | image_processing_api | process_zip_file:716 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:716
2025-08-26 01:20:47,837 | DEBUG    | image_processing_api | process_zip_file:720 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:720
2025-08-26 01:20:47,850 | INFO     | image_processing_api | process_zip_file:724 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-26 01:20:47,851 | DEBUG    | image_processing_api | process_zip_file:733 | Extracted 3 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:733
2025-08-26 01:20:47,851 | DEBUG    | image_processing_api | process_zip_file:734 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:734
2025-08-26 01:20:47,851 | DEBUG    | image_processing_api | process_zip_file:735 | Directory structure: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:735
2025-08-26 01:20:47,851 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:20:47,851 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:20:47,851 | DEBUG    | image_processing_api | process_zip_file:743 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:20:47,851 | DEBUG    | image_processing_api | process_zip_file:746 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:746
2025-08-26 01:20:47,851 | DEBUG    | image_processing_api | load_json_file:217 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:217
2025-08-26 01:20:47,854 | DEBUG    | image_processing_api | load_json_file:222 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:222
2025-08-26 01:20:47,854 | INFO     | image_processing_api | process_zip_file:759 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-26 01:20:47,855 | INFO     | image_processing_api | process_zip_file:762 | Temp directory contents: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:762
2025-08-26 01:20:47,855 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:20:47,856 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:20:47,857 | INFO     | image_processing_api | process_zip_file:769 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:20:47,857 | INFO     | image_processing_api | select_all_images_per_folder:471 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:471
2025-08-26 01:20:47,857 | INFO     | image_processing_api | select_all_images_per_folder:472 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:472
2025-08-26 01:20:47,858 | INFO     | image_processing_api | select_all_images_per_folder:473 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:473
2025-08-26 01:20:47,858 | DEBUG    | image_processing_api | select_all_images_per_folder:481 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:481
2025-08-26 01:20:47,859 | DEBUG    | image_processing_api | select_all_images_per_folder:483 | Items in base folder: ['6292393310444_0001.jpg', '6292393310444_0002.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:483
2025-08-26 01:20:47,859 | INFO     | image_processing_api | select_all_images_per_folder:528 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:528
2025-08-26 01:20:47,859 | INFO     | image_processing_api | select_all_images_per_folder:537 | Found 2 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:537
2025-08-26 01:20:47,859 | INFO     | image_processing_api | select_all_images_per_folder:578 | Created folder group_6292393310444: 2 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:578
2025-08-26 01:20:47,859 | INFO     | image_processing_api | select_all_images_per_folder:580 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:580
2025-08-26 01:20:47,859 | INFO     | image_processing_api | process_zip_file:776 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:776
2025-08-26 01:20:47,859 | INFO     | image_processing_api | process_zip_file:781 | Processing folder: group_6292393310444 with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:781
2025-08-26 01:20:47,859 | DEBUG    | image_processing_api | process_zip_file:787 | Detecting gender for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:787
2025-08-26 01:20:47,859 | INFO     | image_processing_api | detect_gender_from_image:422 | Detecting gender from image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:422
2025-08-26 01:20:47,859 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 01:20:47,860 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 01:20:47,860 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:20:48,081 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:20:48,094 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:20:51,099 | DEBUG    | image_processing_api | _detect_gender_internal:450 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-26 01:20:51,100 | INFO     | image_processing_api | _detect_gender_internal:457 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:457
2025-08-26 01:20:51,100 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:20:51,100 | INFO     | image_processing_api | process_zip_file:790 | Gender detected for group_6292393310444: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:790
2025-08-26 01:20:51,100 | DEBUG    | image_processing_api | process_zip_file:793 | Getting background suggestion for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:793
2025-08-26 01:20:51,100 | INFO     | image_processing_api | get_background_suggestions:303 | Getting background suggestions for image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:303
2025-08-26 01:20:51,100 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 01:20:51,100 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 01:20:51,100 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:20:51,327 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:20:51,338 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:20:51,338 | DEBUG    | image_processing_api | _get_background_suggestions_internal:311 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:311
2025-08-26 01:20:51,338 | DEBUG    | image_processing_api | _get_background_suggestions_internal:335 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:335
2025-08-26 01:20:52,733 | DEBUG    | image_processing_api | _get_background_suggestions_internal:349 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:349
2025-08-26 01:20:52,733 | DEBUG    | image_processing_api | _get_background_suggestions_internal:367 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:367
2025-08-26 01:20:52,734 | INFO     | image_processing_api | _get_background_suggestions_internal:370 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:370
2025-08-26 01:20:52,734 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:20:52,734 | INFO     | image_processing_api | process_zip_file:796 | Background suggestion for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:796
2025-08-26 01:20:52,734 | DEBUG    | image_processing_api | process_zip_file:799 | Generating comprehensive description for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:799
2025-08-26 01:20:52,734 | INFO     | image_processing_api | generate_comprehensive_folder_description:585 | Generating comprehensive description for folder with 2 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:585
2025-08-26 01:20:52,735 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 01:20:52,735 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 01:20:52,735 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:591 | Analyzing first image: 6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:591
2025-08-26 01:20:52,735 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep/6292393310444_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:20:52,961 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:20:52,972 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:20:52,972 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:610 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:610
2025-08-26 01:20:55,600 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:624 | Base description generated: Wearing a black oversized t-shirt featuring a colorful print of the character Rick Sanchez on the ba... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:624
2025-08-26 01:20:55,601 | INFO     | image_processing_api | _generate_comprehensive_description_internal:628 | Analyzing 1 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:628
2025-08-26 01:20:55,601 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 1: 6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:20:55,602 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpn_bx82ep/6292393310444_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:20:55,822 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393310444_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:20:55,832 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393310444_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:20:57,271 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:667 | No additional details from image 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:667
2025-08-26 01:20:57,772 | INFO     | image_processing_api | _generate_comprehensive_description_internal:687 | No additional details found, using base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:687
2025-08-26 01:20:57,772 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:20:57,772 | DEBUG    | image_processing_api | clean_description:699 | Cleaning description: Wearing a black oversized t-shirt featuring a colorful print of the character Rick Sanchez on the ba... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:699
2025-08-26 01:20:57,772 | DEBUG    | image_processing_api | clean_description:711 | Cleaned description: Wearing a black oversized t-shirt featuring a colorful print of the character Rick Sanchez on the ba... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-26 01:20:57,772 | INFO     | image_processing_api | process_zip_file:802 | Description generated for group_6292393310444: Wearing a black oversized t-shirt featuring a colorful print of the character Rick Sanchez on the ba... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:802
2025-08-26 01:20:57,772 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:381 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:381
2025-08-26 01:20:57,773 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:388 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:388
2025-08-26 01:20:57,773 | DEBUG    | image_processing_api | process_zip_file:808 | Finding matching prompt for folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:808
2025-08-26 01:20:57,773 | DEBUG    | image_processing_api | find_matching_prompt:393 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:393
2025-08-26 01:20:57,773 | DEBUG    | image_processing_api | find_matching_prompt:398 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:398
2025-08-26 01:20:57,773 | DEBUG    | image_processing_api | process_zip_file:817 | Prompt found for group_6292393310444: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:817
2025-08-26 01:20:57,773 | DEBUG    | image_processing_api | process_zip_file:825 | Final prompt text generated for group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:825
2025-08-26 01:20:57,773 | INFO     | image_processing_api | process_zip_file:841 | Successfully processed folder: group_6292393310444 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:841
2025-08-26 01:20:57,773 | INFO     | image_processing_api | process_zip_file:856 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:856
2025-08-26 01:20:57,774 | INFO     | image_processing_api | process_images:924 | Request 97d608bd: Processing completed in 9.936s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:924
2025-08-26 01:20:57,774 | DEBUG    | image_processing_api | process_images:929 | Request 97d608bd: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:929
2025-08-26 01:20:57,774 | INFO     | image_processing_api | process_images:931 | Request 97d608bd: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:931
2025-08-26 01:20:57,780 | INFO     | image_processing_api | add_request_id:206 | Request 97d608bd completed: 200 in 12.351s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:206
2025-08-26 01:21:09,861 | INFO     | image_processing_api | add_request_id:199 | Request 3b2c4ff7 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:199
2025-08-26 01:21:22,008 | INFO     | image_processing_api | process_images:894 | Request 3b2c4ff7: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:894
2025-08-26 01:21:22,010 | INFO     | image_processing_api | process_images:902 | Request 3b2c4ff7: File size: 52320743 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-26 01:21:22,017 | DEBUG    | image_processing_api | process_images:908 | Request 3b2c4ff7: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:908
2025-08-26 01:21:22,017 | DEBUG    | image_processing_api | process_images:912 | Request 3b2c4ff7: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:912
2025-08-26 01:21:22,090 | INFO     | image_processing_api | process_images:917 | Request 3b2c4ff7: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:917
2025-08-26 01:21:22,091 | INFO     | image_processing_api | process_zip_file:716 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:716
2025-08-26 01:21:22,091 | DEBUG    | image_processing_api | process_zip_file:720 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:720
2025-08-26 01:21:22,156 | INFO     | image_processing_api | process_zip_file:724 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-26 01:21:22,156 | DEBUG    | image_processing_api | process_zip_file:733 | Extracted 8 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:733
2025-08-26 01:21:22,156 | DEBUG    | image_processing_api | process_zip_file:734 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:734
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:735 | Directory structure: ['6292393960984_0002.jpg', '6292393960984_0003.jpg', '6292393960984_0001.jpg', '6292393960984_0004.jpg', '6292393960984_0005.jpg', '6292393960984_0007.jpg', '6292393960984_0006.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:735
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0007.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292393960984_0006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:743 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | process_zip_file:746 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:746
2025-08-26 01:21:22,157 | DEBUG    | image_processing_api | load_json_file:217 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:217
2025-08-26 01:21:22,159 | DEBUG    | image_processing_api | load_json_file:222 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:222
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:759 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:762 | Temp directory contents: ['6292393960984_0002.jpg', '6292393960984_0003.jpg', '6292393960984_0001.jpg', '6292393960984_0004.jpg', '6292393960984_0005.jpg', '6292393960984_0007.jpg', '6292393960984_0006.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:762
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0007.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292393960984_0006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:21:22,160 | INFO     | image_processing_api | process_zip_file:769 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:21:22,160 | INFO     | image_processing_api | select_all_images_per_folder:471 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:471
2025-08-26 01:21:22,160 | INFO     | image_processing_api | select_all_images_per_folder:472 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:472
2025-08-26 01:21:22,160 | INFO     | image_processing_api | select_all_images_per_folder:473 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:473
2025-08-26 01:21:22,160 | DEBUG    | image_processing_api | select_all_images_per_folder:481 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:481
2025-08-26 01:21:22,160 | DEBUG    | image_processing_api | select_all_images_per_folder:483 | Items in base folder: ['6292393960984_0002.jpg', '6292393960984_0003.jpg', '6292393960984_0001.jpg', '6292393960984_0004.jpg', '6292393960984_0005.jpg', '6292393960984_0007.jpg', '6292393960984_0006.jpg', 'uploaded.zip'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:483
2025-08-26 01:21:22,160 | INFO     | image_processing_api | select_all_images_per_folder:528 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:528
2025-08-26 01:21:22,161 | INFO     | image_processing_api | select_all_images_per_folder:537 | Found 7 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:537
2025-08-26 01:21:22,161 | INFO     | image_processing_api | select_all_images_per_folder:578 | Created folder group_6292393960984: 7 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:578
2025-08-26 01:21:22,162 | INFO     | image_processing_api | select_all_images_per_folder:580 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:580
2025-08-26 01:21:22,162 | INFO     | image_processing_api | process_zip_file:776 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:776
2025-08-26 01:21:22,163 | INFO     | image_processing_api | process_zip_file:781 | Processing folder: group_6292393960984 with 7 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:781
2025-08-26 01:21:22,163 | DEBUG    | image_processing_api | process_zip_file:787 | Detecting gender for folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:787
2025-08-26 01:21:22,164 | INFO     | image_processing_api | detect_gender_from_image:422 | Detecting gender from image: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:422
2025-08-26 01:21:22,165 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 01:21:22,165 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 01:21:22,166 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:21:22,408 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:21:22,419 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:21:24,005 | DEBUG    | image_processing_api | _detect_gender_internal:450 | OpenAI gender detection response: 'Men' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-26 01:21:24,005 | INFO     | image_processing_api | _detect_gender_internal:457 | Gender detected: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:457
2025-08-26 01:21:24,005 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:21:24,005 | INFO     | image_processing_api | process_zip_file:790 | Gender detected for group_6292393960984: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:790
2025-08-26 01:21:24,005 | DEBUG    | image_processing_api | process_zip_file:793 | Getting background suggestion for folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:793
2025-08-26 01:21:24,005 | INFO     | image_processing_api | get_background_suggestions:303 | Getting background suggestions for image: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:303
2025-08-26 01:21:24,006 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 01:21:24,006 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 01:21:24,006 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:21:24,243 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:21:24,255 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:21:24,256 | DEBUG    | image_processing_api | _get_background_suggestions_internal:311 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:311
2025-08-26 01:21:24,256 | DEBUG    | image_processing_api | _get_background_suggestions_internal:335 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:335
2025-08-26 01:21:25,636 | DEBUG    | image_processing_api | _get_background_suggestions_internal:349 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:349
2025-08-26 01:21:25,636 | DEBUG    | image_processing_api | _get_background_suggestions_internal:367 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:367
2025-08-26 01:21:25,637 | INFO     | image_processing_api | _get_background_suggestions_internal:370 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:370
2025-08-26 01:21:25,637 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:21:25,637 | INFO     | image_processing_api | process_zip_file:796 | Background suggestion for group_6292393960984: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:796
2025-08-26 01:21:25,637 | DEBUG    | image_processing_api | process_zip_file:799 | Generating comprehensive description for folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:799
2025-08-26 01:21:25,637 | INFO     | image_processing_api | generate_comprehensive_folder_description:585 | Generating comprehensive description for folder with 7 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:585
2025-08-26 01:21:25,637 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 01:21:25,637 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 01:21:25,637 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:591 | Analyzing first image: 6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:591
2025-08-26 01:21:25,637 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/6292393960984_0001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:21:25,875 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:21:25,886 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:21:25,886 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:610 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:610
2025-08-26 01:21:30,162 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:624 | Base description generated: Wearing a mustard yellow fitted polo shirt with a classic collar and two-button placket, paired with... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:624
2025-08-26 01:21:30,163 | INFO     | image_processing_api | _generate_comprehensive_description_internal:628 | Analyzing 6 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:628
2025-08-26 01:21:30,163 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 1: 6292393960984_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:21:30,163 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/6292393960984_0002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:21:30,382 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:21:30,393 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:21:34,599 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 1: - The polo shirt is a vibrant mustard yellow with a smooth fabric texture, likely cotton or a cotton blend, providing a slightly structured fit.
- The jeans have a relaxed fit, which is looser around the thighs and tapering slightly towards the ankles.
- The footwear is white with a sleek, minimalist design, indicating casual sneakers or athletic shoes, enhancing comfort and casual style. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 01:21:35,105 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 2: 6292393960984_0003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:21:35,105 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/6292393960984_0003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:21:35,338 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0003.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:21:35,356 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0003.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:21:38,678 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 2: - The polo shirt has a textured fabric, giving it a subtle pattern, likely a ribbed or pique texture.
- The fit of the polo is relaxed through the body, with short sleeves that appear slightly loose but still tailored.
- The denim jeans are slightly cropped, showing a bit of the ankle.
- The casual footwear appears to be white sneakers, providing a fresh contrast to the mustard shirt and gray jeans. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 01:21:39,188 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 3: 6292393960984_0004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:21:39,188 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/6292393960984_0004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:21:39,395 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0004.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:21:39,407 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0004.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:21:43,130 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 3: - The fitted polo shirt has a smooth texture, indicating it may be made from a lightweight, breathable cotton or a similar fabric.
- The shirt appears to have a more tailored fit at the waist, enhancing the overall silhouette.
- The jeans feature a slightly distressed detail along the stitching, adding a casual, worn-in look.
- The footwear is not visible in this image; thus, no additional details can be provided regarding it. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 01:21:43,633 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 4: 6292393960984_0005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:21:43,633 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/6292393960984_0005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:21:43,912 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0005.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:21:43,935 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0005.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:21:47,865 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 4: - The polo shirt has a textured fabric, suggesting a pique knit rather than a smooth finish.
- The polo features a two-button placket with tone-on-tone buttons, enhancing its subtle style.
- The collar appears structured, contributing to a polished look.
- The outfit includes an earring on the left ear, adding a personal accessory detail. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 01:21:48,371 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 5: 6292393960984_0006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:21:48,372 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/6292393960984_0006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:21:48,745 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0006.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:21:48,772 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0006.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:21:53,661 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:667 | No additional details from image 5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:667
2025-08-26 01:21:54,164 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 6: 6292393960984_0007.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:21:54,164 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmp0arse95x/6292393960984_0007.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:21:54,410 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292393960984_0007.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:21:54,422 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292393960984_0007.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:21:58,812 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 6: - The polo shirt is made from cotton knitted pique fabric, adding a texture detail that wasn't mentioned.
- The tag indicates that the shirt is available in size M. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 01:21:59,314 | INFO     | image_processing_api | _generate_comprehensive_description_internal:684 | Enhanced description created with 5 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:684
2025-08-26 01:21:59,316 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:21:59,316 | DEBUG    | image_processing_api | clean_description:699 | Cleaning description: Wearing a mustard yellow fitted polo shirt with a classic collar and two-button placket, paired with... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:699
2025-08-26 01:21:59,316 | DEBUG    | image_processing_api | clean_description:711 | Cleaned description: Wearing a mustard yellow fitted polo shirt with a classic collar and two-button placket, paired with... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-26 01:21:59,316 | INFO     | image_processing_api | process_zip_file:802 | Description generated for group_6292393960984: Wearing a mustard yellow fitted polo shirt with a classic collar and two-button placket, paired with... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:802
2025-08-26 01:21:59,316 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:381 | Modifying backgrounds for gender: Men, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:381
2025-08-26 01:21:59,316 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:388 | No modification needed for gender: Men | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:388
2025-08-26 01:21:59,316 | DEBUG    | image_processing_api | process_zip_file:808 | Finding matching prompt for folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:808
2025-08-26 01:21:59,317 | DEBUG    | image_processing_api | find_matching_prompt:393 | Finding matching prompt for background: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:393
2025-08-26 01:21:59,317 | DEBUG    | image_processing_api | find_matching_prompt:398 | Exact match found: Urban street → Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:398
2025-08-26 01:21:59,317 | DEBUG    | image_processing_api | process_zip_file:817 | Prompt found for group_6292393960984: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:817
2025-08-26 01:21:59,317 | DEBUG    | image_processing_api | process_zip_file:825 | Final prompt text generated for group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:825
2025-08-26 01:21:59,317 | INFO     | image_processing_api | process_zip_file:841 | Successfully processed folder: group_6292393960984 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:841
2025-08-26 01:21:59,317 | INFO     | image_processing_api | process_zip_file:856 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:856
2025-08-26 01:21:59,317 | INFO     | image_processing_api | process_images:924 | Request 3b2c4ff7: Processing completed in 37.227s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:924
2025-08-26 01:21:59,318 | DEBUG    | image_processing_api | process_images:929 | Request 3b2c4ff7: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:929
2025-08-26 01:21:59,318 | INFO     | image_processing_api | process_images:931 | Request 3b2c4ff7: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:931
2025-08-26 01:21:59,326 | INFO     | image_processing_api | add_request_id:206 | Request 3b2c4ff7 completed: 200 in 49.465s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:206
2025-08-26 01:22:12,006 | INFO     | image_processing_api | add_request_id:199 | Request 072d6536 started: POST http://ed72b6e851e8.ngrok-free.app/process-images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:199
2025-08-26 01:22:16,629 | INFO     | image_processing_api | process_images:894 | Request 072d6536: Processing images from file: input.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:894
2025-08-26 01:22:16,629 | INFO     | image_processing_api | process_images:902 | Request 072d6536: File size: 26804679 bytes, Content-Type: application/zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:902
2025-08-26 01:22:16,630 | DEBUG    | image_processing_api | process_images:908 | Request 072d6536: Created temp directory: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:908
2025-08-26 01:22:16,631 | DEBUG    | image_processing_api | process_images:912 | Request 072d6536: Saving uploaded file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:912
2025-08-26 01:22:16,655 | INFO     | image_processing_api | process_images:917 | Request 072d6536: File saved successfully, starting processing | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:917
2025-08-26 01:22:16,655 | INFO     | image_processing_api | process_zip_file:716 | Starting zip file processing: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:716
2025-08-26 01:22:16,656 | DEBUG    | image_processing_api | process_zip_file:720 | Extracting zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:720
2025-08-26 01:22:16,694 | INFO     | image_processing_api | process_zip_file:724 | Successfully extracted zip file to: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:724
2025-08-26 01:22:16,694 | DEBUG    | image_processing_api | process_zip_file:733 | Extracted 7 files from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:733
2025-08-26 01:22:16,694 | DEBUG    | image_processing_api | process_zip_file:734 | Extracted 0 directories from zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:734
2025-08-26 01:22:16,694 | DEBUG    | image_processing_api | process_zip_file:735 | Directory structure: ['6292394031010_001.jpg', '6292394031010_002.jpg', '6292394031010_003.jpg', 'uploaded.zip', '6292394031010_006.jpg', '6292394031010_004.jpg', '6292394031010_005.jpg'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:735
2025-08-26 01:22:16,694 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:22:16,694 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292394031010_002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:22:16,694 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292394031010_003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:22:16,694 | DEBUG    | image_processing_api | process_zip_file:743 | File: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:22:16,695 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292394031010_006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:22:16,695 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292394031010_004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:22:16,695 | DEBUG    | image_processing_api | process_zip_file:743 | File: 6292394031010_005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:743
2025-08-26 01:22:16,695 | DEBUG    | image_processing_api | process_zip_file:746 | Loading prompt library | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:746
2025-08-26 01:22:16,695 | DEBUG    | image_processing_api | load_json_file:217 | Loading JSON file: promptlib.json | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:217
2025-08-26 01:22:16,697 | DEBUG    | image_processing_api | load_json_file:222 | Successfully loaded promptlib.json: 111 items | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:222
2025-08-26 01:22:16,697 | INFO     | image_processing_api | process_zip_file:759 | Selecting images from extracted folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:759
2025-08-26 01:22:16,698 | INFO     | image_processing_api | process_zip_file:762 | Temp directory contents: ['6292394031010_001.jpg', '6292394031010_002.jpg', '6292394031010_003.jpg', 'uploaded.zip', '6292394031010_006.jpg', '6292394031010_004.jpg', '6292394031010_005.jpg'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:762
2025-08-26 01:22:16,698 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:22:16,698 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292394031010_002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:22:16,698 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292394031010_003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:22:16,698 | INFO     | image_processing_api | process_zip_file:769 | Found file: uploaded.zip | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:22:16,698 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292394031010_006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:22:16,698 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292394031010_004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:22:16,698 | INFO     | image_processing_api | process_zip_file:769 | Found file: 6292394031010_005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:769
2025-08-26 01:22:16,698 | INFO     | image_processing_api | select_all_images_per_folder:471 | Selecting images from base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:471
2025-08-26 01:22:16,698 | INFO     | image_processing_api | select_all_images_per_folder:472 | Base folder exists: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:472
2025-08-26 01:22:16,698 | INFO     | image_processing_api | select_all_images_per_folder:473 | Base folder is directory: True | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:473
2025-08-26 01:22:16,698 | DEBUG    | image_processing_api | select_all_images_per_folder:481 | Scanning base folder: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:481
2025-08-26 01:22:16,698 | DEBUG    | image_processing_api | select_all_images_per_folder:483 | Items in base folder: ['6292394031010_001.jpg', '6292394031010_002.jpg', '6292394031010_003.jpg', 'uploaded.zip', '6292394031010_006.jpg', '6292394031010_004.jpg', '6292394031010_005.jpg'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:483
2025-08-26 01:22:16,698 | INFO     | image_processing_api | select_all_images_per_folder:528 | Detected flat structure - creating virtual folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:528
2025-08-26 01:22:16,698 | INFO     | image_processing_api | select_all_images_per_folder:537 | Found 6 images in flat structure | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:537
2025-08-26 01:22:16,699 | INFO     | image_processing_api | select_all_images_per_folder:578 | Created folder group_6292394031010: 6 images (0 model images) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:578
2025-08-26 01:22:16,699 | INFO     | image_processing_api | select_all_images_per_folder:580 | Total folders processed: 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:580
2025-08-26 01:22:16,699 | INFO     | image_processing_api | process_zip_file:776 | Found 1 folders to process | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:776
2025-08-26 01:22:16,699 | INFO     | image_processing_api | process_zip_file:781 | Processing folder: group_6292394031010 with 6 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:781
2025-08-26 01:22:16,699 | DEBUG    | image_processing_api | process_zip_file:787 | Detecting gender for folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:787
2025-08-26 01:22:16,699 | INFO     | image_processing_api | detect_gender_from_image:422 | Detecting gender from image: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:422
2025-08-26 01:22:16,699 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _detect_gender_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 01:22:16,699 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 01:22:16,699 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:22:16,885 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292394031010_001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:22:16,895 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292394031010_001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:22:18,320 | DEBUG    | image_processing_api | _detect_gender_internal:450 | OpenAI gender detection response: 'Women' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:450
2025-08-26 01:22:18,322 | INFO     | image_processing_api | _detect_gender_internal:454 | Gender detected: Women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:454
2025-08-26 01:22:18,322 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:22:18,322 | INFO     | image_processing_api | process_zip_file:790 | Gender detected for group_6292394031010: Women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:790
2025-08-26 01:22:18,322 | DEBUG    | image_processing_api | process_zip_file:793 | Getting background suggestion for folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:793
2025-08-26 01:22:18,322 | INFO     | image_processing_api | get_background_suggestions:303 | Getting background suggestions for image: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:303
2025-08-26 01:22:18,322 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _get_background_suggestions_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 01:22:18,322 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 01:22:18,322 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:22:18,539 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292394031010_001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:22:18,549 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292394031010_001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:22:18,550 | DEBUG    | image_processing_api | _get_background_suggestions_internal:311 | Available backgrounds: 111 options | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:311
2025-08-26 01:22:18,550 | DEBUG    | image_processing_api | _get_background_suggestions_internal:335 | Sending request to OpenAI for background suggestions | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:335
2025-08-26 01:22:19,905 | DEBUG    | image_processing_api | _get_background_suggestions_internal:349 | OpenAI response for background suggestions: 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:349
2025-08-26 01:22:19,906 | DEBUG    | image_processing_api | _get_background_suggestions_internal:367 | Matched background suggestion: 'Urban street' → 'Urban street' | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:367
2025-08-26 01:22:19,906 | INFO     | image_processing_api | _get_background_suggestions_internal:370 | Background suggestions extracted: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:370
2025-08-26 01:22:19,906 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:22:19,906 | INFO     | image_processing_api | process_zip_file:796 | Background suggestion for group_6292394031010: Urban street | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:796
2025-08-26 01:22:19,906 | DEBUG    | image_processing_api | process_zip_file:799 | Generating comprehensive description for folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:799
2025-08-26 01:22:19,906 | INFO     | image_processing_api | generate_comprehensive_folder_description:585 | Generating comprehensive description for folder with 6 images | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:585
2025-08-26 01:22:19,906 | DEBUG    | image_processing_api | api_call_with_retry:263 | Starting API call with retry logic: _generate_comprehensive_description_internal | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:263
2025-08-26 01:22:19,906 | DEBUG    | image_processing_api | api_call_with_retry:267 | API call attempt 1/5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:267
2025-08-26 01:22:19,906 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:591 | Analyzing first image: 6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:591
2025-08-26 01:22:19,906 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/6292394031010_001.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:22:20,104 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292394031010_001.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:22:20,115 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292394031010_001.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:22:20,116 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:610 | Sending request to OpenAI for base description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:610
2025-08-26 01:22:22,666 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:624 | Base description generated: Wearing a black oversized pullover with a white collar and a small star logo on the chest, paired wi... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:624
2025-08-26 01:22:22,667 | INFO     | image_processing_api | _generate_comprehensive_description_internal:628 | Analyzing 5 additional images for enhanced description | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:628
2025-08-26 01:22:22,667 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 1: 6292394031010_002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:22:22,667 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/6292394031010_002.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:22:22,893 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292394031010_002.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:22:22,905 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292394031010_002.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:22:25,749 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 1: - The pullover has a ribbed texture at the cuffs and hem.
- The shirt underneath is slightly longer than the pullover, creating a layered effect.
- The trousers have a more draped fit and are slightly pleated at the front.
- The footwear is confirmed to be black with a sleek design, and there is a visible textured sole. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 01:22:26,250 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 2: 6292394031010_003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:22:26,251 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/6292394031010_003.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:22:26,495 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292394031010_003.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:22:26,514 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292394031010_003.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:22:29,927 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 2: - The pullover features a prominent graphic on the back with the word "STARTER" in white text, and additional design elements including ribbons and a star logo.
- The fabric of the pullover appears to have a soft, smooth, and possibly slightly stretchy texture.
- The pullover has a relaxed fit, with dropped shoulders that enhance the oversized appearance.
- The olive green trousers have a slight sheen, indicating they may be made from a smooth fabric.
- The footwear is still not visible in | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 01:22:30,432 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 3: 6292394031010_004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:22:30,432 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/6292394031010_004.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:22:30,636 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292394031010_004.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:22:30,653 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292394031010_004.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:22:33,518 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 3: - The pullover features a more defined collar with a contrast between the black fabric and the white collar, enhancing its structured look.
- The small star logo is white, adding a noticeable contrast against the black background.
- The fit of the pullover appears very relaxed with dropped shoulders, emphasizing the oversized style.
- The fabric of the pullover seems to have a smooth finish, likely a blend of cotton or a synthetic for comfort. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 01:22:34,022 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 4: 6292394031010_005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:22:34,022 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/6292394031010_005.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:22:34,254 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292394031010_005.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:22:34,267 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292394031010_005.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:22:37,754 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:665 | Additional details found from image 4: - The pullover features a more detailed view of the collar, showcasing a classic polo style with a buttoned placket.
- The star logo appears to have a specific font style for the letter and is placed on the left side of the chest.
- The fabric of the pullover has a slightly textured appearance, suggesting a soft, possibly cotton or cotton-blend material.
- No additional information about the trousers or footwear is provided in this zoomed-in view. | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:665
2025-08-26 01:22:38,257 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:634 | Analyzing additional image 5: 6292394031010_006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:634
2025-08-26 01:22:38,257 | DEBUG    | image_processing_api | encode_image_with_resizing:233 | Processing image: /var/folders/c1/ldxrmn552j738t4qrsd_czr40000gn/T/tmpq0agjdhi/6292394031010_006.jpg | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:233
2025-08-26 01:22:38,478 | INFO     | image_processing_api | encode_image_with_resizing:245 | Resized image 6292394031010_006.jpg: (3000, 3000) → (1024, 1024) | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:245
2025-08-26 01:22:38,488 | DEBUG    | image_processing_api | encode_image_with_resizing:254 | Successfully encoded image 6292394031010_006.jpg to base64 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:254
2025-08-26 01:22:40,225 | DEBUG    | image_processing_api | _generate_comprehensive_description_internal:667 | No additional details from image 5 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:667
2025-08-26 01:22:40,731 | INFO     | image_processing_api | _generate_comprehensive_description_internal:684 | Enhanced description created with 4 additional details | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:684
2025-08-26 01:22:40,734 | DEBUG    | image_processing_api | api_call_with_retry:269 | API call successful on attempt 1 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:269
2025-08-26 01:22:40,734 | DEBUG    | image_processing_api | clean_description:699 | Cleaning description: Wearing a black oversized pullover with a white collar and a small star logo on the chest, paired wi... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:699
2025-08-26 01:22:40,734 | DEBUG    | image_processing_api | clean_description:711 | Cleaned description: Wearing a black oversized pullover with a white collar and a small star logo on the chest, paired wi... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:711
2025-08-26 01:22:40,734 | INFO     | image_processing_api | process_zip_file:802 | Description generated for group_6292394031010: Wearing a black oversized pullover with a white collar and a small star logo on the chest, paired wi... | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:802
2025-08-26 01:22:40,734 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:381 | Modifying backgrounds for gender: Women, suggestions: ['Urban street'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:381
2025-08-26 01:22:40,734 | DEBUG    | image_processing_api | modify_backgrounds_for_gender:385 | Modified backgrounds for women: ['Urban street_women'] | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:385
2025-08-26 01:22:40,734 | DEBUG    | image_processing_api | process_zip_file:808 | Finding matching prompt for folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:808
2025-08-26 01:22:40,735 | DEBUG    | image_processing_api | find_matching_prompt:393 | Finding matching prompt for background: Urban street_women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:393
2025-08-26 01:22:40,735 | DEBUG    | image_processing_api | find_matching_prompt:398 | Exact match found: Urban street_women → Urban street_women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:398
2025-08-26 01:22:40,735 | DEBUG    | image_processing_api | process_zip_file:817 | Prompt found for group_6292394031010: Urban street_women | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:817
2025-08-26 01:22:40,735 | DEBUG    | image_processing_api | process_zip_file:825 | Final prompt text generated for group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:825
2025-08-26 01:22:40,735 | INFO     | image_processing_api | process_zip_file:841 | Successfully processed folder: group_6292394031010 | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:841
2025-08-26 01:22:40,735 | INFO     | image_processing_api | process_zip_file:856 | Zip file processing completed. 1 folders processed | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:856
2025-08-26 01:22:40,735 | INFO     | image_processing_api | process_images:924 | Request 072d6536: Processing completed in 24.080s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:924
2025-08-26 01:22:40,736 | DEBUG    | image_processing_api | process_images:929 | Request 072d6536: Cleaned up temporary zip file | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:929
2025-08-26 01:22:40,736 | INFO     | image_processing_api | process_images:931 | Request 072d6536: Successfully processed 1 folders | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:931
2025-08-26 01:22:40,739 | INFO     | image_processing_api | add_request_id:206 | Request 072d6536 completed: 200 in 28.734s | /Users/apple/Desktop/Automation Dashboard API/PromptMap n8n Working/app.py:206
